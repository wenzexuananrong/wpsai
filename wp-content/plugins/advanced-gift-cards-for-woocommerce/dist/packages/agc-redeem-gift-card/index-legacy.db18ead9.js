System.register([],(function(e,o){"use strict";return{execute:function(){var e=document.createElement("style");e.textContent='#agcfw-redeem-gift-card.agcfw-checkout-redeem{margin-bottom:2.5em}#agcfw-redeem-gift-card.agcfw-checkout-redeem h3{padding:1em 1.2em;margin:0;background:#f8f8f8;font-size:1em;font-weight:700}#agcfw-redeem-gift-card.agcfw-toggle-redeem-form h3{cursor:pointer}#agcfw-redeem-gift-card.agcfw-toggle-redeem-form h3 .caret{position:relative;top:-2px;margin-left:5px}#agcfw-redeem-gift-card.agcfw-toggle-redeem-form.show h3 .caret img{transform:rotate(0)}#agcfw-redeem-gift-card.agcfw-checkout-redeem h3 .caret img{display:inline-block;transition:transform .5s ease;transform:rotate(-90deg)}#agcfw-redeem-gift-card.agcfw-toggle-redeem-form .agcfw-inner{height:0;max-height:111px;overflow:hidden;transition:height .5s ease}#agcfw-redeem-gift-card.agcfw-toggle-redeem-form.show .agcfw-inner{height:500px}#agcfw-redeem-gift-card.agcfw-checkout-redeem .agcfw-inner-content{background:#fafafa;padding:1em 1.2em}#agcfw-redeem-gift-card.agcfw-checkout-redeem .agcfw-inner p{margin-bottom:.5em}.webui-popover{border-radius:0;border:0;-webkit-box-shadow:0 2px 10px rgba(0,0,0,.2);box-shadow:0 2px 10px rgba(0,0,0,.2)}.webui-popover .webui-popover-title{font-size:1em;color:inherit;padding:.7em 1em .7em 2em;background:url(\'data:image/svg+xml,<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 0.125C4.15117 0.125 0.625 3.65117 0.625 8C0.625 12.3488 4.15117 15.875 8.5 15.875C12.8488 15.875 16.375 12.3488 16.375 8C16.375 3.65117 12.8488 0.125 8.5 0.125ZM8.5 14.5391C4.88945 14.5391 1.96094 11.6105 1.96094 8C1.96094 4.38945 4.88945 1.46094 8.5 1.46094C12.1105 1.46094 15.0391 4.38945 15.0391 8C15.0391 11.6105 12.1105 14.5391 8.5 14.5391Z" fill="%236D6D6D"/><path d="M10.4617 4.56699C9.93437 4.10469 9.23828 3.85156 8.5 3.85156C7.76172 3.85156 7.06562 4.10645 6.53828 4.56699C5.98984 5.04688 5.6875 5.69199 5.6875 6.38281V6.51641C5.6875 6.59375 5.75078 6.65703 5.82812 6.65703H6.67188C6.74922 6.65703 6.8125 6.59375 6.8125 6.51641V6.38281C6.8125 5.60762 7.57012 4.97656 8.5 4.97656C9.42988 4.97656 10.1875 5.60762 10.1875 6.38281C10.1875 6.92949 9.80078 7.43047 9.20137 7.66074C8.82871 7.80313 8.5123 8.05273 8.28555 8.37969C8.05527 8.71367 7.93574 9.11445 7.93574 9.52051V9.89844C7.93574 9.97578 7.99902 10.0391 8.07637 10.0391H8.92012C8.99746 10.0391 9.06074 9.97578 9.06074 9.89844V9.49941C9.06165 9.32877 9.11396 9.16236 9.21085 9.02188C9.30774 8.88141 9.44471 8.77339 9.60391 8.71191C10.641 8.31289 11.3107 7.39883 11.3107 6.38281C11.3125 5.69199 11.0102 5.04688 10.4617 4.56699ZM7.79688 11.8672C7.79688 12.0537 7.87095 12.2325 8.00282 12.3644C8.13468 12.4962 8.31352 12.5703 8.5 12.5703C8.68648 12.5703 8.86532 12.4962 8.99718 12.3644C9.12905 12.2325 9.20312 12.0537 9.20312 11.8672C9.20312 11.6807 9.12905 11.5019 8.99718 11.37C8.86532 11.2381 8.68648 11.1641 8.5 11.1641C8.31352 11.1641 8.13468 11.2381 8.00282 11.37C7.87095 11.5019 7.79688 11.6807 7.79688 11.8672Z" fill="%236D6D6D"/></svg>\') no-repeat .7em center}.webui-popover .webui-popover-content{font-size:.9em;padding:.7em 1em}.webui-popover.bottom-right .webui-arrow{border-bottom-color:rgba(0,0,0,.07)}\n',document.head.appendChild(e),jQuery(document).ready((function(e){var o=e("#agcfw-redeem-gift-card"),t={initPopover:function(){e(".agcfw-tooltip").each((function(){e(this).webuiPopover({title:e(this).data("title"),content:e(this).data("content"),width:250,closable:!0,animation:"pop",padding:!1,placement:"bottom-right"})}))},initBlockMaxHeight:function(){var o=e("#agcfw-redeem-gift-card");if(o.hasClass("agcfw-toggle-redeem-form")){var t=o.find(".agcfw-inner-content").height()+2*parseInt(getComputedStyle(o.find(".agcfw-inner-content")[0]).fontSize);o.find(".agcfw-inner").css({maxHeight:t})}},submitRedeemForm:function(o){var r=e(this).closest(".agcfw-redeem-gift-card-form"),c=e(this).siblings("input.gift_card_code"),i=r.data("is_checkout");r.find("input,button").prop("disabled",!0),i&&t.blockCheckout(),e.post(woocommerce_params.ajax_url,{action:"agcfw_redeem_gift_card",gift_card_code:c.val(),_wpnonce:r.data("nonce")},(function(o){i?(t.unblockCheckout(),e(document.body).trigger("update_checkout",{update_shipping_method:!1})):window.location.reload()}),"json").always((function(){c.val(""),r.find("input,button").prop("disabled",!1)}))},toggleFormButton:function(){var o=e(this);o.siblings(".button").prop("disabled",!o.val())},blockCheckout:function(){e(".woocommerce form.woocommerce-checkout").addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblockCheckout:function(){e(".woocommerce-error, .woocommerce-message").remove(),e(".woocommerce form.woocommerce-checkout").removeClass("processing").unblock()},toggleShowCheckoutRedeemForm:function(){o.toggleClass("show")},waitForVisibleElement:function(e){return new Promise((o=>{const t=setInterval((()=>{const r=document.querySelector(e);r&&r.offsetWidth>0&&r.offsetHeight>0&&(clearInterval(t),o(r))}),100)}))}};o.on("keyup",".agcfw-redeem-gift-card-form input.gift_card_code",t.toggleFormButton),o.on("click",".agcfw-redeem-gift-card-form button",t.submitRedeemForm),o.on("click","h3",t.toggleShowCheckoutRedeemForm),t.initPopover(),jQuery("#owp-checkout-timeline")?t.waitForVisibleElement("#agcfw-redeem-gift-card").then((function(){t.initBlockMaxHeight()})):t.initBlockMaxHeight()}))}}}));
