System.register(["../../common/reactLib-legacy.f03215d2.js"],(function(e,t){"use strict";var a;return{setters:[e=>{a=e.c}],execute:function(){var e=document.createElement("style");e.textContent=".agc-dashboard{max-width:1257px}.agc-dashboard .agc-report-widgets{display:flex;flex-flow:row wrap;margin:0 -.5em;clear:both}.agc-dashboard .agc-report-widgets .section-title{width:100%;font-size:20px}.agc-dashboard .agc-report-widgets .widget{width:calc(25% - 1em);margin:.5em .5em 2em}.agc-dashboard .agc-report-widgets .widget .widget-header{display:flex;flex-flow:row;align-items:flex-end;margin-bottom:.5em}.agc-dashboard .agc-report-widgets .widget .widget-header h3{display:inline-block;margin:0 .3em 0 0}.agc-dashboard .agc-report-widgets .big-number-widget,.agc-dashboard .agc-report-widgets .upsell-widget{border:0;box-shadow:0 2px 4px rgba(0,0,0,.23)}.agc-dashboard .agc-report-widgets .big-number-widget .ant-card-body,.agc-dashboard .agc-report-widgets .upsell-widget .ant-card-body{display:flex;flex-flow:column;justify-content:center;align-items:center;min-height:130px}.agc-dashboard .agc-report-widgets .big-number-widget .ant-card-body p,.agc-dashboard .agc-report-widgets .upsell-widget .ant-card-body p{margin:0;font-size:1.2em}.agc-dashboard .agc-report-widgets .big-number-widget .ant-card-body p.title,.agc-dashboard .agc-report-widgets .upsell-widget .ant-card-body p.title{display:flex;align-items:center;column-gap:.1em;font-size:2.5em;font-weight:700}.agc-dashboard .agc-report-widgets .big-number-widget .ant-card-body p.description,.agc-dashboard .agc-report-widgets .upsell-widget .ant-card-body p.description{display:flex;flex-flow:row;align-items:flex-end;column-gap:.4em}.agc-dashboard .agc-report-widgets .big-number-widget .ant-card-body p .woocommerce-Price-currencySymbol,.agc-dashboard .agc-report-widgets .upsell-widget .ant-card-body p .woocommerce-Price-currencySymbol{font-size:.7em}.agc-dashboard .agc-report-widgets .gift-card-table-widget{width:calc(50% - 1em)}.agc-dashboard .agc-report-widgets .gift-card-table-widget .widget-name{font-size:16px}.agc-dashboard .agc-report-widgets .gift-card-table-widget table{min-height:330px}.agc-dashboard .agc-report-widgets .gift-card-table-widget table .ant-table-cell .discounted-label{display:inline-block;margin-right:.3em}.agc-dashboard .report-date-range-picker{display:block;float:right;margin-bottom:1em}.manage-gift-cards .gc-filter-form{margin-bottom:15px}.manage-gift-cards .gc-filter-form>*{margin-right:10px}.manage-gift-cards .gc-filter-form .ant-input-affix-wrapper{max-width:300px}.manage-gift-cards .gc-filter-form .ant-input-affix-wrapper .ant-input{min-height:23px;line-height:1px}.manage-gift-cards .gc-filter-form .ant-select{width:150px}.manage-gift-cards .gift-card-actions>*{margin-right:5px}.manage-gift-cards .ant-pagination{float:right;margin-top:15px}.edit-gift-card-modal{padding-bottom:0}.edit-gift-card-modal .ant-modal-close-x{display:none}.edit-gift-card-modal .order-item-product .ant-form-item-control-input-content{display:flex;align-items:center;justify-content:space-between}.edit-gift-card-modal .form-actions-wrap{width:100%;text-align:right}.edit-gift-card-modal .form-actions-wrap .ant-form-item-label{visibility:hidden}.edit-gift-card-modal .form-actions-wrap .ant-btn{margin-left:5px}#agcfw_admin_app .acfw-license-box{position:relative;margin-top:-70px}#agcfw_admin_app .acfw-license-box .license-info{position:relative}#agcfw_admin_app .acfw-license-box .license-info .heading .left{width:calc(100% - 192px)!important}#agcfw_admin_app .acfw-license-box .license-info .overlay{display:none;position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,.6);align-items:center;justify-content:center;text-align:center}#agcfw_admin_app .acfw-license-box .license-info.show .overlay{display:flex}#agcfw_admin_app .acfw-license-box .license-info .active-indicator.activated{background:#c6cd2e;padding:12px 16px}#agcfw_admin_app .acfw-license-box .license-info .active-indicator.activated .anticon{margin-right:.5em}#agcfw_admin_app .acfw-license-box .no-hover{opacity:1!important}#agcfw_admin_app .acfw-license-box .license-form{padding:20px 30px;border-top:1px solid #d5d5d5;background:#f1f1f1}#agcfw_admin_app .acfw-license-box .license-form .ant-form{display:flex;align-items:end;justify-content:space-between}#agcfw_admin_app .acfw-license-box .license-form .ant-form .license-form-item{width:calc(50% - 99px);margin-bottom:10px}#agcfw_admin_app .acfw-license-box .license-form .ant-form .license-form-item.form-action{width:100%;max-width:198px}#agcfw_admin_app .acfw-license-box .license-form .ant-form .ant-form-item-label{padding-bottom:5px}#agcfw_admin_app .acfw-license-box .license-form .ant-form input,#agcfw_admin_app .acfw-license-box .license-form .ant-form button{border-radius:2px;font-size:16px}#agcfw_admin_app .acfw-license-box .license-form .ant-form label{display:inline-block;font-size:13px;color:#444;font-weight:700}#agcfw_admin_app .acfw-license-box .license-form .ant-form input{padding:5px 10px;width:calc(100% - 15px);border:1px solid #D9D9D9;box-sizing:border-box}#agcfw_admin_app .acfw-license-box .license-form .ant-form button{width:100%;margin-top:27px;background:#C6CD2E;cursor:pointer;border:0;color:#262626;height:43px;font-weight:700}#agcfw_admin_app .acfw-license-box .license-form .ant-form button:hover{opacity:.8}#agcfw_admin_app .acfw-license-box .license-form .ant-form .grayed button{background:#ccc}#agcfw_admin_app .acfw-license-box .license-form .help-row{font-size:13px}#agcfw_admin_app .acfw-license-box .license-form .help-row a{color:inherit;text-decoration:underline}#agcfw_admin_app .acfw-license-box .license-form .help-row a:hover{color:#00a0d2}#agcfw_admin_app{margin:70px 25px 0}.agcfw-activate-license-notice h4.agcfw-activate-license-notice{margin:1.1em}\n",document.head.appendChild(e);const{antd:{Popover:t},antdIcons:{ExclamationCircleOutlined:n}}=acfwpElements,r=e=>{const{content:a}=e;return acfwpElements.element.createElement("span",{className:"tooltip"},acfwpElements.element.createElement(t,{overlayClassName:"dashboard-tooltip",placement:"top",content:acfwpElements.element.createElement("span",{dangerouslySetInnerHTML:{__html:a}}),trigger:"click"},acfwpElements.element.createElement(n,null)))},{antd:{Card:i}}=acfwpElements,s=e=>{const{widget:t}=e;return acfwpElements.element.createElement(i,{className:"widget big-number-widget"},acfwpElements.element.createElement("p",{className:"title"},acfwpElements.element.createElement("span",{className:"widget-value",dangerouslySetInnerHTML:{__html:t.title_html}}),null!=t&&t.tooltip_html?acfwpElements.element.createElement(r,{content:t.tooltip_html}):null),acfwpElements.element.createElement("p",{className:"description"},acfwpElements.element.createElement("span",{className:"widget-name",dangerouslySetInnerHTML:{__html:t.description_html}})))},{element:{Fragment:l},antd:{Table:c}}=acfwpElements,o=e=>{const{widget:t}=e,{admin_url:a}=acfwAdminApp,{main_page:{labels:n}}=agcfwAdminApp,i=[{title:n.product,dataIndex:"product",key:"product",render:(e,t)=>acfwpElements.element.createElement("a",{href:`${a}post.php?post=${t.id}&action=edit`,target:"_blank",rel:"noreferrer"},e)},{title:n.quantity,dataIndex:"quantity",key:"quantity"},{title:acfwpElements.element.createElement(l,null,acfwpElements.element.createElement("span",{className:"value-label"},n.value),null!=t&&t.tooltip_html?acfwpElements.element.createElement(r,{content:t.tooltip_html}):null),dataIndex:"value",key:"value"}];return acfwpElements.element.createElement("div",{className:"widget gift-card-table-widget"},acfwpElements.element.createElement("div",{className:"widget-header"},acfwpElements.element.createElement("h3",{className:"widget-name",dangerouslySetInnerHTML:{__html:t.title_html}})),t.table_data&&acfwpElements.element.createElement(c,{bordered:!0,dataSource:t.table_data,columns:i,pagination:!1}))},d=e=>{const{widgets:t}=e;return t?acfwpElements.element.createElement("div",{className:"agc-report-widgets"},t.map(((e,t)=>{switch(e.type){case"big_number":return acfwpElements.element.createElement(s,{key:e.key,widget:e});case"table":return acfwpElements.element.createElement(o,{key:e.key,widget:e});case"section_title":return acfwpElements.element.createElement("h2",{key:e.key,className:"section-title"},e.title_html)}return null}))):null},{antd:{Card:m,Skeleton:p}}=acfwpElements,f=e=>{const{count:t}=e;return acfwpElements.element.createElement("div",{className:"agc-report-widgets"},[...Array(t)].map(((e,t)=>acfwpElements.element.createElement(m,{key:t,className:"widget widget-skeleton"},acfwpElements.element.createElement(p,{active:!0})))))},{antd:{Select:u,DatePicker:g},moment:E}=acfwpElements,w=e=>{const{store_credits_page:{labels:t,period_options:a}}=acfwAdminApp,{className:n,periodValue:r,startPeriod:i,endPeriod:s,onPeriodChange:l,onCustomDateRange:c}=e;return acfwpElements.element.createElement("div",{className:`report-date-range-picker ${n}`},acfwpElements.element.createElement(u,{value:r,onSelect:l},a.map(((e,t)=>acfwpElements.element.createElement(u.Option,{key:t,value:e.value},e.label)))),acfwpElements.element.createElement(g.RangePicker,{value:[i,s],onChange:c}))};var y=(e=>(e.READ_DASHBOARD_MAIN_WIDGETS_DATA="READ_DASHBOARD_MAIN_WIDGETS_DATA",e.READ_DASHBOARD_ACTIVITY_WIDGETS_DATA="READ_DASHBOARD_ACTIVITY_WIDGETS_DATA",e.SET_DASHBOARD_MAIN_WIDGETS_DATA="SET_DASHBOARD_MAIN_WIDGETS_DATA",e.SET_DASHBOARD_ACTIVITY_WIDGETS_DATA="SET_DASHBOARD_ACTIVITY_WIDGETS_DATA",e))(y||{});const _={readMainWidgetsData:e=>({type:"READ_DASHBOARD_MAIN_WIDGETS_DATA",payload:e}),readActivityWidgetsData:e=>({type:"READ_DASHBOARD_ACTIVITY_WIDGETS_DATA",payload:e}),setMainWidgetsData:e=>({type:"SET_DASHBOARD_MAIN_WIDGETS_DATA",payload:e}),setActivityWidgetsData:e=>({type:"SET_DASHBOARD_ACTIVITY_WIDGETS_DATA",payload:e})},{moment:h}=acfwpElements,{element:{Fragment:b,useEffect:A,useState:v},redux:{bindActionCreators:C,connect:D},antd:{Row:x,Col:T,Card:S},moment:I}=acfwpElements,{readMainWidgetsData:R,readActivityWidgetsData:B}=_,G=D((e=>({mainWidgets:e.mainWidgets,activityWidgets:e.activityWidgets})),(e=>({actions:C({readMainWidgetsData:R,readActivityWidgetsData:B},e)})))((e=>{const{mainWidgets:t,activityWidgets:a,actions:n}=e,[r,i]=v("month_to_date"),[s,l]=v(I().startOf("month")),[c,o]=v(I().startOf("day")),[m,p]=v(!1),[u,g]=v(!1);return A((()=>{null!=t&&t.length||(p(!0),n.readMainWidgetsData({successCB:()=>p(!1)}))}),[]),A((()=>{g(!0),n.readActivityWidgetsData({startPeriod:s.format("YYYY-MM-DD"),endPeriod:c.format("YYYY-MM-DD"),successCB:()=>g(!1)})}),[s,c]),acfwpElements.element.createElement("div",{className:"agc-dashboard"},m?acfwpElements.element.createElement(f,{count:4}):acfwpElements.element.createElement(d,{widgets:t}),acfwpElements.element.createElement("div",{className:"activity-report"},acfwpElements.element.createElement(w,{periodValue:r,startPeriod:s,endPeriod:c,onPeriodChange:e=>{if(e===r)return;const[t,a]=(e=>{let t=h().startOf("month"),a=h().startOf("day");switch(e){case"week_to_date":t=h().startOf("week"),a=h().startOf("day");break;case"month_to_date":t=h().startOf("month"),a=h().startOf("day");break;case"quarter_to_date":t=h().startOf("quarter"),a=h().startOf("day");break;case"year_to_date":t=h().startOf("year"),a=h().startOf("day");break;case"last_week":t=h().subtract(1,"weeks").startOf("week"),a=h().subtract(1,"weeks").endOf("week");break;case"last_month":t=h().subtract(1,"months").startOf("month"),a=h().subtract(1,"months").endOf("month");break;case"last_quarter":t=h().subtract(1,"quarters").startOf("quarter"),a=h().subtract(1,"quarters").endOf("quarter");break;case"last_year":t=h().subtract(1,"years").startOf("year"),a=h().subtract(1,"years").endOf("year")}return[t,a]})(e);i(e),l(t),o(a)},onCustomDateRange:e=>{var t,a;e&&(l(null!==(t=e[0])&&void 0!==t?t:""),o(null!==(a=e[1])&&void 0!==a?a:""),i("custom"))}}),acfwpElements.element.createElement("h2",{className:"section-title"},"Gift Card Activity"),u?acfwpElements.element.createElement(f,{count:8}):acfwpElements.element.createElement(d,{widgets:a})))})),{element:{useEffect:k,useState:O},antd:{Alert:N,Form:F,Divider:P,Input:M,Select:H,DatePicker:j,Button:W,Radio:L},moment:U}=acfwpElements,Y=e=>{var t;const{editData:a,handleCreateGiftCard:n,handleEditGiftCard:r}=e,{adminUrl:i,main_page:{labels:s,status_options:l}}=agcfwAdminApp,c=Object.entries(l).map((([e,t])=>({label:t,value:e}))),o="YYYY-MM-DD HH:mm:ss",[d]=F.useForm(),[m,p]=O(null!==(t=a.send_to)&&void 0!==t?t:"");return k((()=>{var e;return p(null!==(e=a.send_to)&&void 0!==e?e:"")}),[a]),acfwpElements.element.createElement(F,{className:"edit-gift-card-form",form:d,labelCol:{span:6},wrapperCol:{span:18},initialValues:{...a,date_created:a.date_created?U(a.date_created):"",date_expire:a.date_expire?U(a.date_expire):""},onFinish:e=>{const{date_created:t,date_expire:i,send_to:s,recipient_name:l,recipient_email:c,short_message:d,...m}=e,p={...m,id:a.id,date_created:t?U(t).format(o):"",date_expire:i?U(i).format(o):"",recipient:{send_to:s,name:l,email:c,short_message:d}};p.id?r(p):n(p)}},acfwpElements.element.createElement(F.Item,{label:s.gift_card_code,name:"code",rules:[{required:!0,message:s.invalid_field_message.replace("{field}",s.gift_card_code)}]},acfwpElements.element.createElement(M,null)),!!a.id&&!!a.order_id&&acfwpElements.element.createElement(F.Item,{className:"order-item-product",label:s.product},acfwpElements.element.createElement("span",null,a.product_name),acfwpElements.element.createElement(W,{className:"view-order-btn",href:`${i}post.php?post=${a.order_id}&action=edit`,target:"_blank"},s.view_order)),acfwpElements.element.createElement(F.Item,{label:s.status,name:"status",rules:[{required:!0,message:s.invalid_field_message.replace("{field}",s.status)}]},acfwpElements.element.createElement(H,{options:c})),acfwpElements.element.createElement(F.Item,{label:s.value,name:"value",rules:[{required:!0,message:s.invalid_field_message.replace("{field}",s.value)},{validator:(e,t)=>function(e){const{currency:t}=acfwAdminApp.store_credits_page,a=`^\\d+(\\${t.decimal_separator}\\d{1,${t.decimals}})?$`;return new RegExp(a).test(e)}(t)&&parseFloat(t)>0?Promise.resolve():Promise.reject(new Error(s.invalid_price))}]},acfwpElements.element.createElement(M,{className:"wc_input_price"})),acfwpElements.element.createElement(F.Item,{label:s.date_created,name:"date_created",rules:[{required:!0,message:s.invalid_field_message.replace("{field}",s.date_created)}]},acfwpElements.element.createElement(j,{format:o,showTime:!0})),acfwpElements.element.createElement(F.Item,{label:s.date_expire,name:"date_expire"},acfwpElements.element.createElement(j,{format:o,showTime:!0})),acfwpElements.element.createElement(P,null),acfwpElements.element.createElement(F.Item,{label:s.send_to,name:"send_to"},acfwpElements.element.createElement(L.Group,{onChange:e=>p(e.target.value)},acfwpElements.element.createElement(L,{value:"friend"},s.friend),acfwpElements.element.createElement(L,{value:"me"},s.me))),acfwpElements.element.createElement(F.Item,{label:s.recipient_name,name:"recipient_name",rules:[{required:"friend"===m,message:s.invalid_field_message.replace("{field}",s.recipient_name)}]},acfwpElements.element.createElement(M,{disabled:"friend"!==m})),acfwpElements.element.createElement(F.Item,{label:s.recipient_email,name:"recipient_email",rules:[{required:"friend"===m,message:s.invalid_field_message.replace("{field}",s.recipient_email)},{type:"email",message:s.invalid_email}]},acfwpElements.element.createElement(M,{disabled:"friend"!==m})),acfwpElements.element.createElement(F.Item,{label:s.short_message,name:"short_message"},acfwpElements.element.createElement(M.TextArea,{rows:3,disabled:"friend"!==m})),acfwpElements.element.createElement(P,null),acfwpElements.element.createElement(F.Item,{className:"form-actions-wrap",label:" "},acfwpElements.element.createElement(W,{onClick:()=>d.resetFields()},s.reset),acfwpElements.element.createElement(W,{type:"primary",htmlType:"submit"},a.id?s.save_changes:s.create_gift_card)),!a.id&&acfwpElements.element.createElement(N,{message:s.manual_gift_card_info,type:"info",showIcon:!0}))},{element:{Fragment:q,useEffect:$,useState:z},redux:{bindActionCreators:V,connect:K},antd:{Button:Q,Popconfirm:X},antdIcons:{EditOutlined:J,MailOutlined:Z,DeleteOutlined:ee},moment:te}=acfwpElements,ae=e=>{var t;const{giftCard:a,editDispatch:n,handleDeleteGiftCard:r,handleSendEmail:i}=e,{main_page:{labels:s}}=agcfwAdminApp;return acfwpElements.element.createElement("div",{className:"gift-card-actions"},acfwpElements.element.createElement(Q,{className:"edit-gift-card",size:"small",onClick:()=>(()=>{const{value_raw:e}=a;n({type:"all",payload:{...a,value:e,product_name:null!=a&&a.product?a.product.name:"",order_id:null!=a&&a.product?a.product.order_id:0,send_to:null!=a&&a.recipient?a.recipient.send_to:"",recipient_name:null!=a&&a.recipient?a.recipient.name:"",recipient_email:null!=a&&a.recipient?a.recipient.email:"",short_message:null!=a&&a.recipient?a.recipient.short_message:"",open:!0}})})()},acfwpElements.element.createElement(J,null)),acfwpElements.element.createElement(X,{title:`Resend gift card email to ${null==a||null===(t=a.recipient)||void 0===t?void 0:t.email}?`,onConfirm:()=>i(a.id)},acfwpElements.element.createElement(Q,{className:"send-gift-card",size:"small",disabled:!(null!=a&&a.recipient&&a.recipient.email)},acfwpElements.element.createElement(Z,null))),acfwpElements.element.createElement(X,{title:s.confirm_delete_gift_card,okText:s.yes,okType:"danger",cancelText:s.danger,onConfirm:()=>r(a.id)},acfwpElements.element.createElement(Q,{className:"delete-gift-card",size:"small"},acfwpElements.element.createElement(ee,null))))},{antd:{Tag:ne}}=acfwpElements,re=e=>{var t,a;const{status:n}=e,{main_page:{labels:r,status_options:i}}=agcfwAdminApp;return acfwpElements.element.createElement(ne,{color:null!==(t={pending:"#e6b41e",used:"#1ed14b",invalid:"#b32d2e",expired:"#2c3338"}[n])&&void 0!==t?t:""},null!==(a=i[n])&&void 0!==a?a:"")},{moment:ie}=acfwpElements,se={open:!1,key:"",id:0,code:"",status:"pending",value:0,date_created:"",date_expire:"",product_name:"",order_id:0,send_to:"friend",recipient_name:"",recipient_email:"",short_message:""},le=(e,t)=>{switch(t.type){case"all":return{...t.payload,open:!0};case"open":return{...se,date_created:ie().format("YYYY-MM-DD HH:mm:ss"),open:t.payload,value:void 0};case"reset":return se;case"code":return{...e,code:t.payload};case"status":return{...e,status:t.payload};case"value":return{...e,value:t.payload};case"date_created":return{...e,date_created:t.payload};case"date_expire":return{...e,date_expire:t.payload};case"send_to":return{...e,send_to:t.payload}}return e};var ce=(e=>(e.READ_GIFT_CARD="READ_GIFT_CARD",e.CREATE_GIFT_CARD="CREATE_GIFT_CARD",e.UPDATE_GIFT_CARD="UPDATE_GIFT_CARD",e.DELETE_GIFT_CARD="DELETE_GIFT_CARD",e.REHYDRATE_STORE_GIFT_CARDS="REHYDRATE_STORE_GIFT_CARDS",e.SET_STORE_GIFT_CARDS="SET_STORE_GIFT_CARDS",e.SET_SINGLE_GIFT_CARD="SET_SINGLE_GIFT_CARD",e.SEND_GIFT_CARD_EMAIL="SEND_GIFT_CARD_EMAIL",e))(ce||{});const oe={readGiftCard:e=>({type:"READ_GIFT_CARD",payload:e}),createGiftCard:e=>({type:"CREATE_GIFT_CARD",payload:e}),updateGiftCard:e=>({type:"UPDATE_GIFT_CARD",payload:e}),deleteGiftCard:e=>({type:"DELETE_GIFT_CARD",payload:e}),rehydrateStoreGiftCards:e=>({type:"REHYDRATE_STORE_GIFT_CARDS",payload:e}),sendGiftCardEmail:e=>({type:"SEND_GIFT_CARD_EMAIL",payload:e}),setStoreGiftCards:e=>({type:"SET_STORE_GIFT_CARDS",payload:e}),setSingleGiftCard:e=>({type:"SET_SINGLE_GIFT_CARD",payload:e})},{element:{Fragment:de,useEffect:me,useState:pe,useReducer:fe},redux:{bindActionCreators:ue,connect:ge},antd:{Card:Ee,Table:we,message:ye,Input:_e,Select:he,Button:be,Pagination:Ae,Divider:ve,Modal:Ce},antdIcons:{PlusOutlined:De},moment:xe}=acfwpElements,{rehydrateStoreGiftCards:Te,createGiftCard:Se,updateGiftCard:Ie,deleteGiftCard:Re,sendGiftCardEmail:Be}=oe,Ge=ge((e=>({giftCards:e.giftCards})),(e=>({actions:ue({rehydrateStoreGiftCards:Te,createGiftCard:Se,updateGiftCard:Ie,deleteGiftCard:Re,sendGiftCardEmail:Be},e)})))((e=>{const{giftCards:t,actions:a}=e,{main_page:{labels:n,status_options:r}}=agcfwAdminApp,[i,s]=pe(-1),[l,c]=pe(!1),[o,d]=pe(!0),[m,p]=fe(le,se),[f,u]=pe(""),[g,E]=pe(null),[w,y]=pe(1),_=Object.entries(r).map((([e,t])=>({label:t,value:e}))),h=e=>{c(!0),a.deleteGiftCard({id:e,successCB:e=>{ye.success(e.data.message)},failCB:({error:e})=>{ye.error(e.response.data.message)},alwaysCB:()=>{d(!0)}})},b=e=>{a.sendGiftCardEmail({id:e,successCB:e=>{ye.success(e.data.message)},failCB:({error:e})=>{ye.error(e.response.data.message)}})},A=[{title:n.gift_card_code,dataIndex:"code",key:"code",className:"gift-card-code"},{title:n.status,dataIndex:"status",key:"status",className:"gift-card-status",render:e=>acfwpElements.element.createElement(re,{status:e})},{title:n.product,dataIndex:"product",key:"product",className:"gift-card-product",render:(e,t)=>null!=t&&t.product?t.product.name:""},{title:n.amount,dataIndex:"value",key:"value",className:"gift-card-amount"},{title:n.date_created,dataIndex:"date_created",key:"date_created",className:"gift-card-date-created"},{title:n.date_expire,dataIndex:"date_expire",key:"date_expire",className:"gift-card-date-expires"},{title:"",dataIndex:"id",key:"actions",className:"gift-card-actions",render:(e,t)=>acfwpElements.element.createElement(ae,{giftCard:t,editDispatch:p,handleDeleteGiftCard:h,handleSendEmail:b})}];return me((()=>{o&&(c(!0),a.rehydrateStoreGiftCards({query:{search:f,page:w,status:null!=g?g:""},successCB:e=>s(e.headers["x-total"]),alwaysCB:()=>{c(!1),d(!1)}}))}),[o]),acfwpElements.element.createElement(Ee,{className:"manage-gift-cards",title:acfwpElements.element.createElement(de,null,acfwpElements.element.createElement("span",null,n.gift_cards),acfwpElements.element.createElement(ve,{type:"vertical"}),acfwpElements.element.createElement(be,{onClick:()=>p({type:"open",payload:!0}),icon:acfwpElements.element.createElement(De,null)},n.add_new_gift_card))},acfwpElements.element.createElement("div",{className:"gc-filter-form"},acfwpElements.element.createElement(_e,{placeholder:n.search,value:f,onChange:e=>u(e.target.value),allowClear:!0}),acfwpElements.element.createElement(he,{placeholder:n.select_status,options:_,value:g,allowClear:!0,onSelect:e=>E(e),onClear:()=>E(null)}),acfwpElements.element.createElement(be,{onClick:()=>d(!0)},n.search)),acfwpElements.element.createElement(we,{className:"gift-cards-table",loading:l,columns:A,dataSource:t,pagination:!1}),i>-1&&acfwpElements.element.createElement(Ae,{defaultCurrent:w,hideOnSinglePage:!0,current:w,total:i,pageSize:10,showSizeChanger:!1,onChange:e=>{y(e),d(!0)}}),acfwpElements.element.createElement(Ce,{className:"edit-gift-card-modal",open:m.open,okText:"Save Changes",footer:null,destroyOnClose:!0,onCancel:()=>{p({type:"reset"})}},acfwpElements.element.createElement(Y,{editData:m,editDispatch:p,handleEditGiftCard:e=>{c(!0),a.updateGiftCard({data:{...e,id:m.id,date_format:"Y-m-d H:i:s"},successCB:e=>{ye.success(e.data.message)},failCB:({error:e})=>{ye.error(e.response.data.message)},alwaysCB:()=>{p({type:"reset"}),c(!1)}})},handleCreateGiftCard:e=>{c(!0),a.createGiftCard({data:{...e,date_format:"Y-m-d H:i:s",order_item_id:0},successCB:e=>{ye.success(e.data.message)},failCB:({error:e})=>{ye.error(e.response.data.message)},alwaysCB:()=>{p({type:"reset"}),c(!1)}})}})))})),ke=e=>{const{slug:t}=e;return"dashboard"===t?acfwpElements.element.createElement(G,null):"manage-gift-cards"===t?acfwpElements.element.createElement(Ge,null):null},{router:{useHistory:Oe,useLocation:Ne},antd:{Tabs:Fe},pathPrefix:Pe}=acfwpElements,Me=()=>{const{logo:e}=acfwAdminApp,{main_page:{title:t,tabs:a}}=agcfwAdminApp,n=new URLSearchParams(Ne().search).get("tab"),r=n?a.findIndex((e=>e.slug===n)):0,i=Oe();return acfwpElements.element.createElement("div",{className:"agcfw-admin-app acfw-admin-app"},acfwpElements.element.createElement("div",{className:"page-header agc-page-header"},acfwpElements.element.createElement("img",{className:"acfw-logo",src:e,alt:"acfw logo"}),acfwpElements.element.createElement("h1",null,t)),acfwpElements.element.createElement(Fe,{activeKey:r.toString(),defaultActiveKey:r.toString(),onTabClick:e=>{i.push(`${Pe}admin.php?page=acfw-advanced-gift-cards&tab=${a[e].slug}`)}},a.map(((e,t)=>acfwpElements.element.createElement(Fe.TabPane,{tab:e.label,key:t.toString()},acfwpElements.element.createElement(ke,{slug:e.slug}))))))},{element:{useEffect:He,useState:je,Fragment:We},antd:{Form:Le,Input:Ue,Button:Ye,Typography:qe,Skeleton:$e,message:ze},antdIcons:{CheckCircleFilled:Ve}}=acfwpElements,Ke=()=>{const[e,t]=je({key:!1}),[a,n]=je(!1),[r,i]=je(!1),{Link:s}=qe,[l]=Le.useForm(),{license_page:{title:c,about_content:o,license_status:d,indicator:m,specs:p,formlabels:f,spinner_img:u}}=agcfwAdminApp;return He((()=>{jQuery.ajax({url:ajaxurl,data:{action:"agcfw_get_license_details"},dataType:"json"}).done((e=>{"success"===e.status&&t({key:e.license_key?e.license_key:"",email:e.email?e.email:"",is_active:e.is_active})})).always((()=>n(!0)))}),[t,n]),acfwpElements.element.createElement("div",{className:"acfw-license-box"},acfwpElements.element.createElement("div",{className:"overview"},acfwpElements.element.createElement("h1",null,c)),acfwpElements.element.createElement("div",{className:"license-info "+(r?"show":"")},acfwpElements.element.createElement("div",{className:"heading"},acfwpElements.element.createElement("div",{className:"left"},acfwpElements.element.createElement("span",null,d)),acfwpElements.element.createElement("div",{className:"right"},acfwpElements.element.createElement("span",{className:"action-button active-indicator no-hover "+("yes"==e.is_active?"activated":"")},"yes"==e.is_active&&acfwpElements.element.createElement(Ve,null),"yes"==e.is_active?m.active:m.inactive))),acfwpElements.element.createElement("div",{className:"content"},acfwpElements.element.createElement("p",null,o),acfwpElements.element.createElement("table",{className:"license-specs"},acfwpElements.element.createElement("thead",null,acfwpElements.element.createElement("tr",null,p.map((e=>acfwpElements.element.createElement("th",{key:e.label},e.label))))),acfwpElements.element.createElement("tbody",null,acfwpElements.element.createElement("tr",null,p.map((e=>acfwpElements.element.createElement("td",{key:e.value},e.value))))))),acfwpElements.element.createElement("div",{className:"license-form agc-license-form"},a?acfwpElements.element.createElement(We,null,acfwpElements.element.createElement(Le,{layout:"vertical",form:l,initialValues:e,onFinish:a=>{i(!0),(e=>{const{license_page:{_formNonce:t}}=agcfwAdminApp;return jQuery.ajax({method:"post",url:ajaxurl,data:{action:"agcfw_activate_license","activation-email":e.email,"license-key":e.key,"ajax-nonce":t},dataType:"json"})})(a).done((n=>{var r,i;"success"===n.status?(ze.success(n.message),t({key:null!==(r=a.key)&&void 0!==r?r:"",email:null!==(i=a.email)&&void 0!==i?i:"",is_active:"yes"})):(["inactive","invalid","expired"].includes(n.license_status)&&t({...e,is_active:"no"}),ze.error(n.message))})).always((()=>i(!1)))}},acfwpElements.element.createElement(Le.Item,{className:"license-form-item license-key-field",label:f.license_key,name:"key"},acfwpElements.element.createElement(Ue,{type:"password",autocomplete:"off"})),acfwpElements.element.createElement(Le.Item,{className:"license-form-item activation-email-field",label:f.email,name:"email"},acfwpElements.element.createElement(Ue,{type:"email",autocomplete:"off"})),acfwpElements.element.createElement(Le.Item,{className:"license-form-item form-action "+("yes"==e.is_active?"grayed":"")},acfwpElements.element.createElement(Ye,{type:"primary",htmlType:"submit"},f.button))),acfwpElements.element.createElement("div",{className:"help-row"},f.help.text," ",acfwpElements.element.createElement(s,{href:f.help.link,target:"_blank"},f.help.login))):acfwpElements.element.createElement($e,{loading:!0,active:!0,paragraph:{rows:1}})),acfwpElements.element.createElement("div",{className:"overlay"},acfwpElements.element.createElement("img",{src:u,alt:"spinner"}))))},{element:{useState:Qe,useEffect:Xe},appStore:{store:Je}}=acfwpElements,Ze=()=>{const[e,t]=Qe("");return Xe((()=>{e||t(Je.getState().page)}),[]),Je.subscribe((()=>{const a=Je.getState().page;e!==a&&t(a)})),"acfw-advanced-gift-cards"===e?acfwpElements.element.createElement(Me,null):"acfw-license/AGC"===e?acfwpElements.element.createElement(Ke,null):null},et=(e=null,t)=>{if(t.type===y.SET_DASHBOARD_MAIN_WIDGETS_DATA){const{widgets:e}=t.payload;return e}return e},tt=(e=null,t)=>{if(t.type===y.SET_DASHBOARD_ACTIVITY_WIDGETS_DATA){const{widgets:e}=t.payload;return e}return e},at=(e=[],t)=>{switch(t.type){case ce.SET_STORE_GIFT_CARDS:{const{giftCards:e}=t.payload;return e}case ce.SET_SINGLE_GIFT_CARD:{const{giftCard:a}=t.payload,n=[...e],r=n.findIndex((e=>e.id===a.id));return r>-1?n[r]=a:n.unshift(a),n}default:return e}};!function(e){!function(t){var a="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,s="ArrayBuffer"in e;if(s)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function o(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function m(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise((function(t,a){e.onload=function(){t(e.result)},e.onerror=function(){a(e.error)}}))}function g(e){var t=new FileReader,a=u(t);return t.readAsArrayBuffer(e),a}function E(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:r&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:a&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&r&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=E(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=E(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,a,n=f(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,a=u(t),t.readAsText(e),a;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),a=new Array(t.length),n=0;n<t.length;n++)a[n]=String.fromCharCode(t[n]);return a.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=o(e),t=d(t);var a=this.map[e];this.map[e]=a?a+", "+t:t},p.prototype.delete=function(e){delete this.map[o(e)]},p.prototype.get=function(e){return e=o(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},p.prototype.set=function(e,t){this.map[o(e)]=d(t)},p.prototype.forEach=function(e,t){for(var a in this.map)this.map.hasOwnProperty(a)&&e.call(t,this.map[a],a,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,a){e.push(a)})),m(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),m(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,a){e.push([a,t])})),m(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(e,t){var a,n,r=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(a=t.method||this.method||"GET",n=a.toUpperCase(),y.indexOf(n)>-1?n:a),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var a=e.split("="),n=a.shift().replace(/\+/g," "),r=a.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(r))}})),t}function b(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},w.call(_.prototype),w.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var A=[301,302,303,307,308];b.redirect=function(e,t){if(-1===A.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(C){t.DOMException=function(e,t){this.message=e,this.name=t;var a=Error(e);this.stack=a.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function v(e,a){return new Promise((function(n,i){var s=new _(e,a);if(s.signal&&s.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;function c(){l.abort()}l.onload=function(){var e,t,a={status:l.status,statusText:l.statusText,headers:(e=l.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var a=e.split(":"),n=a.shift().trim();if(n){var r=a.join(":").trim();t.append(n,r)}})),t)};a.url="responseURL"in l?l.responseURL:a.headers.get("X-Request-URL");var r="response"in l?l.response:l.responseText;n(new b(r,a))},l.onerror=function(){i(new TypeError("Network request failed"))},l.ontimeout=function(){i(new TypeError("Network request failed"))},l.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},l.open(s.method,s.url,!0),"include"===s.credentials?l.withCredentials=!0:"omit"===s.credentials&&(l.withCredentials=!1),"responseType"in l&&r&&(l.responseType="blob"),s.headers.forEach((function(e,t){l.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",c),l.onreadystatechange=function(){4===l.readyState&&s.signal.removeEventListener("abort",c)}),l.send(void 0===s._bodyInit?null:s._bodyInit)}))}v.polyfill=!0,e.fetch||(e.fetch=v,e.Headers=p,e.Request=_,e.Response=b),t.Headers=p,t.Request=_,t.Response=b,t.fetch=v,Object.defineProperty(t,"__esModule",{value:!0})}({})}("undefined"!=typeof self?self:a);const{axiosInstance:nt,redux:{sagaEffects:rt}}=acfwpElements,{put:it,call:st,takeEvery:lt}=rt,ct=[lt(y.READ_DASHBOARD_MAIN_WIDGETS_DATA,(function*(e){const{processingCB:t,successCB:a,failCB:n}=e.payload;try{"function"==typeof t&&t();const e=yield st(nt.get,"coupons/v1/reports/gift-cards");e&&e.data&&it&&(yield it(_.setMainWidgetsData({widgets:e.data}))),"function"==typeof a&&a(e)}catch(r){"function"==typeof n&&n({error:r})}})),lt(y.READ_DASHBOARD_ACTIVITY_WIDGETS_DATA,(function*(e){const{startPeriod:t,endPeriod:a,processingCB:n,successCB:r,failCB:i}=e.payload;try{"function"==typeof n&&n();const e=yield st(nt.get,"coupons/v1/reports/gift-cards/activity",{params:{startPeriod:t,endPeriod:a}});e&&e.data&&it&&(yield it(_.setActivityWidgetsData({widgets:e.data}))),"function"==typeof r&&r(e)}catch(s){"function"==typeof i&&i({error:s})}}))],{axiosInstance:ot,redux:{sagaEffects:dt}}=acfwpElements,{put:mt,call:pt,takeEvery:ft}=dt,ut=[ft("READ_GIFT_CARD",(function*(e){const{id:t,processingCB:a,successCB:n,failCB:r,alwaysCB:i}=e.payload;try{"function"==typeof a&&a();const e=yield pt(ot.get,`coupons/v1/gift-cards/${t}`);e&&e.data&&mt&&(yield mt(oe.setSingleGiftCard({giftCard:e.data})),"function"==typeof n&&n(e))}catch(s){"function"==typeof r&&r({error:s})}"function"==typeof i&&i()})),ft("CREATE_GIFT_CARD",(function*(e){const{data:t,processingCB:a,successCB:n,failCB:r,alwaysCB:i}=e.payload;"function"==typeof a&&a();try{"function"==typeof a&&a();const e=yield pt(ot.post,"coupons/v1/gift-cards/",t);e&&e.data&&mt&&(yield mt(oe.setSingleGiftCard({giftCard:e.data.data})),"function"==typeof n&&n(e))}catch(s){"function"==typeof r&&r({error:s})}"function"==typeof i&&i()})),ft("UPDATE_GIFT_CARD",(function*(e){const{data:t,processingCB:a,successCB:n,failCB:r,alwaysCB:i}=e.payload;try{"function"==typeof a&&a();const{id:e,...r}=t,i=yield pt(ot.put,`coupons/v1/gift-cards/${e}`,r);i&&i.data&&mt&&(yield mt(oe.setSingleGiftCard({giftCard:i.data.data})),"function"==typeof n&&n(i))}catch(s){"function"==typeof r&&r({error:s})}"function"==typeof i&&i()})),ft("DELETE_GIFT_CARD",(function*(e){const{id:t,processingCB:a,successCB:n,failCB:r,alwaysCB:i}=e.payload;try{"function"==typeof a&&a();const e=yield pt(ot.delete,`coupons/v1/gift-cards/${t}`);e&&e.data&&mt&&"function"==typeof n&&n(e)}catch(s){"function"==typeof r&&r({error:s})}"function"==typeof i&&i()})),ft("REHYDRATE_STORE_GIFT_CARDS",(function*(e){const{query:t,processingCB:a,successCB:n,failCB:r,alwaysCB:i}=e.payload;try{"function"==typeof a&&a();const e=yield pt(ot.get,"coupons/v1/gift-cards",{params:t});Array.isArray(e.data)&&mt&&(yield mt(oe.setStoreGiftCards({giftCards:e.data})),"function"==typeof n&&n(e))}catch(s){"function"==typeof r&&r({error:s})}"function"==typeof i&&i()})),ft("SEND_GIFT_CARD_EMAIL",(function*(e){const{id:t,processingCB:a,successCB:n,failCB:r,alwaysCB:i}=e.payload;try{"function"==typeof a&&a();const e=yield pt(ot.post,"coupons/v1/gift-cards/sendemail",{id:t});e&&e.data&&mt&&"function"==typeof n&&n(e)}catch(s){"function"==typeof r&&r({error:s})}"function"==typeof i&&i()}))],{redux:{sagaEffects:gt}}=acfwpElements,{all:Et}=gt;function*wt(){yield Et([...ct,...ut])}const{redux:{sagaEffects:yt,createStore:_t,combineReducers:ht,applyMiddleware:bt,createSagaMiddleware:At}}=acfwpElements,{dom:vt,router:{BrowserRouter:Ct,Route:Dt},pathPrefix:xt,appStore:{Provider:Tt,store:St}}=acfwpElements,It=function(e){const t=At(),a=_t(ht({mainWidgets:et,activityWidgets:tt,giftCards:at}),(n=[t],bt(...n)));var n;return t.run(wt),a}();document.querySelectorAll("#agcfw_admin_app").forEach((e=>{vt.render(acfwpElements.element.createElement(Tt,{store:It},acfwpElements.element.createElement(Ct,null,acfwpElements.element.createElement(Dt,{path:`${xt}admin.php`,component:Ze}))),e)}))}}}));
