import{g as ha,e as ya,r as p,u as Q,j as oe,R as l,L as kt,d as Ge,B as He,k as Ve,l as Ra}from"../../common/reactLib.deb836f9.js";import{f as Mt,t as Sa,d as Ta,s as Ca,e as ba,m as wa,g as U,p as B,h as xt,i as Lt,j as Bt,k as Ut,l as jt,n as I,o as $,P as Ye}from"../../common/redux.cb701b1a.js";import{aa as va,ab as Aa,ac as Ft,ad as qe,ae as Gt,af as Oa,ag as Na,ah as Pa,ai as Ht,aj as Da,ak as Ia,al as $a,am as ka,an as Ma,ao as xa,ap as ze,aq as Vt,ar as Yt,as as qt,at as La,au as Ba,av as Ua,aw as ja,ax as P,ay as V,n as zt,az as ae,aA as Ke,F as Fa,aB as le,aC as W,aD as We,aE as z,X as Qe,aF as ge,aG as H,aH as N,aI as ve,aJ as Ee,aK as K,aL as Y,V as Ga,aM as Je,aN as ce,aO as ke,aP as Kt,aQ as ut,aR as ye,aS as Ha,aT as Xe,aU as pe,R as dt,aV as Wt,aW as Va,aX as Ya,aY as qa,aZ as za,o as Ka,a_ as mt,a$ as Wa}from"../../common/antd.bea37c17.js";import{T as Qt,R as Qa,S as Jt,C as Ja,I as Xa,W as Za,A as Xt,G as en,a as tn,b as an,M as nn,D as rn,L as sn,U as cn,c as on,d as ln,e as un,f as dn,g as mn,B as pn,h as fn}from"../../common/antdIcons.cd7a8ba8.js";function pd(){import.meta.url,import("_").catch(()=>1);async function*e(){}}var pt=function(t){return{done:!0,value:t}},Me={};function En(e){return Ta(e)?"channel":Ca(e)?String(e):ba(e)?e.name:String(e)}function _n(e,t,a){var r,n,s,c=t;function o(m,i){if(c===Me)return pt(m);if(i&&!n)throw c=Me,i;r&&r(m);var u=i?e[n](i):e[c]();return c=u.nextState,s=u.effect,r=u.stateUpdater,n=u.errorState,c===Me?pt(m):s}return wa(o,function(m){return o(null,m)},a)}function gn(e,t){for(var a=arguments.length,r=new Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];var s={done:!1,value:Sa(e)},c=function(u){return{done:!1,value:Mt.apply(void 0,[t].concat(r,[u]))}},o,m=function(u){return o=u};return _n({q1:function(){return{nextState:"q2",effect:s,stateUpdater:m}},q2:function(){return{nextState:"q1",effect:c(o)}}},"q1","takeEvery("+En(e)+", "+t.name+")")}function L(e,t){for(var a=arguments.length,r=new Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];return Mt.apply(void 0,[gn,e,t].concat(r))}function hn(e,t){for(var a=-1,r=e==null?0:e.length;++a<r&&t(e[a],a,e)!==!1;);return e}var yn=hn,Rn=va,Sn=function(){try{var e=Rn(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Tn=Sn,ft=Tn;function Cn(e,t,a){t=="__proto__"&&ft?ft(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}var Zt=Cn,bn=Zt,wn=Aa,vn=Object.prototype,An=vn.hasOwnProperty;function On(e,t,a){var r=e[t];(!(An.call(e,t)&&wn(r,a))||a===void 0&&!(t in e))&&bn(e,t,a)}var ea=On,Nn=ea,Pn=Zt;function Dn(e,t,a,r){var n=!a;a||(a={});for(var s=-1,c=t.length;++s<c;){var o=t[s],m=r?r(a[o],e[o],o,a,e):void 0;m===void 0&&(m=e[o]),n?Pn(a,o,m):Nn(a,o,m)}return a}var Ae=Dn,In=Ae,$n=Ft;function kn(e,t){return e&&In(t,$n(t),e)}var Mn=kn;function xn(e){var t=[];if(e!=null)for(var a in Object(e))t.push(a);return t}var Ln=xn,Bn=qe,Un=Gt,jn=Ln,Fn=Object.prototype,Gn=Fn.hasOwnProperty;function Hn(e){if(!Bn(e))return jn(e);var t=Un(e),a=[];for(var r in e)r=="constructor"&&(t||!Gn.call(e,r))||a.push(r);return a}var Vn=Hn,Yn=Oa,qn=Vn,zn=Na;function Kn(e){return zn(e)?Yn(e,!0):qn(e)}var Ze=Kn,Wn=Ae,Qn=Ze;function Jn(e,t){return e&&Wn(t,Qn(t),e)}var Xn=Jn,Te={exports:{}};Te.exports;(function(e,t){var a=Pa,r=t&&!t.nodeType&&t,n=r&&!0&&e&&!e.nodeType&&e,s=n&&n.exports===r,c=s?a.Buffer:void 0,o=c?c.allocUnsafe:void 0;function m(i,u){if(u)return i.slice();var E=i.length,_=o?o(E):new i.constructor(E);return i.copy(_),_}e.exports=m})(Te,Te.exports);var Zn=Te.exports;function er(e,t){var a=-1,r=e.length;for(t||(t=Array(r));++a<r;)t[a]=e[a];return t}var tr=er,ar=Ae,nr=Ht;function rr(e,t){return ar(e,nr(e),t)}var sr=rr,cr=Da,or=cr(Object.getPrototypeOf,Object),ta=or,lr=Ia,ir=ta,ur=Ht,dr=$a,mr=Object.getOwnPropertySymbols,pr=mr?function(e){for(var t=[];e;)lr(t,ur(e)),e=ir(e);return t}:dr,aa=pr,fr=Ae,Er=aa;function _r(e,t){return fr(e,Er(e),t)}var gr=_r,hr=ka,yr=aa,Rr=Ze;function Sr(e){return hr(e,Rr,yr)}var Tr=Sr,Cr=Object.prototype,br=Cr.hasOwnProperty;function wr(e){var t=e.length,a=new e.constructor(t);return t&&typeof e[0]=="string"&&br.call(e,"index")&&(a.index=e.index,a.input=e.input),a}var vr=wr,Et=Ma;function Ar(e){var t=new e.constructor(e.byteLength);return new Et(t).set(new Et(e)),t}var et=Ar,Or=et;function Nr(e,t){var a=t?Or(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}var Pr=Nr,Dr=/\w*$/;function Ir(e){var t=new e.constructor(e.source,Dr.exec(e));return t.lastIndex=e.lastIndex,t}var $r=Ir,_t=xa,gt=_t?_t.prototype:void 0,ht=gt?gt.valueOf:void 0;function kr(e){return ht?Object(ht.call(e)):{}}var Mr=kr,xr=et;function Lr(e,t){var a=t?xr(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}var Br=Lr,Ur=et,jr=Pr,Fr=$r,Gr=Mr,Hr=Br,Vr="[object Boolean]",Yr="[object Date]",qr="[object Map]",zr="[object Number]",Kr="[object RegExp]",Wr="[object Set]",Qr="[object String]",Jr="[object Symbol]",Xr="[object ArrayBuffer]",Zr="[object DataView]",es="[object Float32Array]",ts="[object Float64Array]",as="[object Int8Array]",ns="[object Int16Array]",rs="[object Int32Array]",ss="[object Uint8Array]",cs="[object Uint8ClampedArray]",os="[object Uint16Array]",ls="[object Uint32Array]";function is(e,t,a){var r=e.constructor;switch(t){case Xr:return Ur(e);case Vr:case Yr:return new r(+e);case Zr:return jr(e,a);case es:case ts:case as:case ns:case rs:case ss:case cs:case os:case ls:return Hr(e,a);case qr:return new r;case zr:case Qr:return new r(e);case Kr:return Fr(e);case Wr:return new r;case Jr:return Gr(e)}}var us=is,ds=qe,yt=Object.create,ms=function(){function e(){}return function(t){if(!ds(t))return{};if(yt)return yt(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}(),ps=ms,fs=ps,Es=ta,_s=Gt;function gs(e){return typeof e.constructor=="function"&&!_s(e)?fs(Es(e)):{}}var hs=gs,ys=ze,Rs=Vt,Ss="[object Map]";function Ts(e){return Rs(e)&&ys(e)==Ss}var Cs=Ts,bs=Cs,ws=qt,Rt=Yt,St=Rt&&Rt.isMap,vs=St?ws(St):bs,As=vs,Os=ze,Ns=Vt,Ps="[object Set]";function Ds(e){return Ns(e)&&Os(e)==Ps}var Is=Ds,$s=Is,ks=qt,Tt=Yt,Ct=Tt&&Tt.isSet,Ms=Ct?ks(Ct):$s,xs=Ms,Ls=La,Bs=yn,Us=ea,js=Mn,Fs=Xn,Gs=Zn,Hs=tr,Vs=sr,Ys=gr,qs=Ua,zs=Tr,Ks=ze,Ws=vr,Qs=us,Js=hs,Xs=ja,Zs=Ba,ec=As,tc=qe,ac=xs,nc=Ft,rc=Ze,sc=1,cc=2,oc=4,na="[object Arguments]",lc="[object Array]",ic="[object Boolean]",uc="[object Date]",dc="[object Error]",ra="[object Function]",mc="[object GeneratorFunction]",pc="[object Map]",fc="[object Number]",sa="[object Object]",Ec="[object RegExp]",_c="[object Set]",gc="[object String]",hc="[object Symbol]",yc="[object WeakMap]",Rc="[object ArrayBuffer]",Sc="[object DataView]",Tc="[object Float32Array]",Cc="[object Float64Array]",bc="[object Int8Array]",wc="[object Int16Array]",vc="[object Int32Array]",Ac="[object Uint8Array]",Oc="[object Uint8ClampedArray]",Nc="[object Uint16Array]",Pc="[object Uint32Array]",M={};M[na]=M[lc]=M[Rc]=M[Sc]=M[ic]=M[uc]=M[Tc]=M[Cc]=M[bc]=M[wc]=M[vc]=M[pc]=M[fc]=M[sa]=M[Ec]=M[_c]=M[gc]=M[hc]=M[Ac]=M[Oc]=M[Nc]=M[Pc]=!0;M[dc]=M[ra]=M[yc]=!1;function Re(e,t,a,r,n,s){var c,o=t&sc,m=t&cc,i=t&oc;if(a&&(c=n?a(e,r,n,s):a(e)),c!==void 0)return c;if(!tc(e))return e;var u=Xs(e);if(u){if(c=Ws(e),!o)return Hs(e,c)}else{var E=Ks(e),_=E==ra||E==mc;if(Zs(e))return Gs(e,o);if(E==sa||E==na||_&&!n){if(c=m||_?{}:Js(e),!o)return m?Ys(e,Fs(c,e)):Vs(e,js(c,e))}else{if(!M[E])return n?e:{};c=Qs(e,E,o)}}s||(s=new Ls);var g=s.get(e);if(g)return g;s.set(e,c),ac(e)?e.forEach(function(w){c.add(Re(w,t,a,w,e,s))}):ec(e)&&e.forEach(function(w,A){c.set(A,Re(w,t,a,A,e,s))});var R=i?m?zs:qs:m?rc:nc,h=u?void 0:R(e);return Bs(h||e,function(w,A){h&&(A=w,w=e[A]),Us(c,A,Re(w,t,a,A,e,s))}),c}var Dc=Re,Ic=Dc,$c=1,kc=4;function Mc(e){return Ic(e,$c|kc)}var xc=Mc;const Ce=ha(xc);var de=(e=>(e.READ_SECTIONS="READ_SECTIONS",e.READ_SECTION="READ_SECTION",e.SET_STORE_SECTIONS="SET_STORE_SECTIONS",e.SET_STORE_SECTION="SET_STORE_SECTION",e.TOGGLE_MODULE_SECTION="TOGGLE_MODULE_SECTION",e))(de||{});const Oe={readSections:e=>({type:"READ_SECTIONS",payload:e}),readSection:e=>({type:"READ_SECTION",payload:e}),setStoreSectionItems:e=>({type:"SET_STORE_SECTIONS",payload:e}),setStoreSectionItem:e=>({type:"SET_STORE_SECTION",payload:e}),toggleModuleSection:e=>({type:"TOGGLE_MODULE_SECTION",payload:e})},Lc=(e=[],t)=>{switch(t.type){case de.SET_STORE_SECTIONS:{const{data:a}=t.payload;return a}case de.SET_STORE_SECTION:{const{data:a}=t.payload,r=e.findIndex(s=>s.id===a.id);if(r<0)return e;const n=Ce(e);return n[r]={...n[r],...a},n}case de.TOGGLE_MODULE_SECTION:{const{module:a,show:r}=t.payload,n=e.findIndex(c=>c.module&&c.module===a);if(n<0)return e;const s=Ce(e);return s[n].show=r,s}default:return e}};var te=(e=>(e.CREATE_SETTING="CREATE_SETTING",e.UPDATE_SETTING="UPDATE_SETTING",e.DELETE_SETTING="DELETE_SETTING",e.READ_SETTINGS="READ_SETTINGS",e.REHYDRATE_STORE_SETTINGS="REHYDRATE_STORE_SETTINGS",e.REHYDRATE_STORE_SETTING="REHYDRATE_STORE_SETTING",e.SET_STORE_SETTINGS="SET_STORE_SETTINGS",e.SET_STORE_SETTING="SET_STORE_SETTING",e))(te||{});const X={createSetting:e=>({type:"CREATE_SETTING",payload:e}),updateSetting:e=>({type:"UPDATE_SETTING",payload:e}),deleteSetting:e=>({type:"DELETE_SETTING",payload:e}),readSettings:e=>({type:"READ_SETTINGS",payload:e}),rehydrateStoreSettings:e=>({type:"REHYDRATE_STORE_SETTINGS",payload:e}),rehydrateStoreSetting:e=>({type:"REHYDRATE_STORE_SETTING",payload:e}),setStoreSettingItems:e=>({type:"SET_STORE_SETTINGS",payload:e}),setStoreSettingItem:e=>({type:"SET_STORE_SETTING",payload:e})},Bc=(e=[],t)=>{switch(t.type){case te.SET_STORE_SETTINGS:{const{data:a}=t.payload;let r=Ce(e);for(const n of a){let s=e.findIndex(c=>c.id===n.id);r[s]?r[s]=n:r.push(n)}return r}case te.SET_STORE_SETTING:{const{data:a}=t.payload,r=e.findIndex(s=>s.id===a.id);if(r<0)return e;const n=Ce(e);return n[r]={...n[r],...a},n}default:return e}};var ca=(e=>(e.SET_STORE_PAGE="SET_STORE_PAGE",e))(ca||{});const ie={setStorePage:e=>({type:"SET_STORE_PAGE",payload:e})},Uc=(e="",t)=>{switch(t.type){case ca.SET_STORE_PAGE:{const{data:a}=t.payload;return a}default:return e}};var fe=(e=>(e.READ_STORE_CREDITS_DASHBOARD_DATA="READ_STORE_CREDITS_DASHBOARD_DATA",e.READ_STORE_CREDITS_HISTORY_DATA="READ_STORE_CREDITS_HISTORY",e.SET_STORE_CREDITS_DASHBOARD_DATA="SET_STORE_CREDITS_DASHBOARD_DATA",e.SET_STORE_CREDITS_HISTORY_DATA="SET_STORE_CREDITS_HISTORY_DATA",e))(fe||{});const Ne={readStoreCreditsDashboardData:e=>({type:"READ_STORE_CREDITS_DASHBOARD_DATA",payload:e}),readStoreCreditsHistoryData:e=>({type:"READ_STORE_CREDITS_HISTORY",payload:e}),setStoreCreditsDashboardData:e=>({type:"SET_STORE_CREDITS_DASHBOARD_DATA",payload:e}),setStoreCreditsHistoryData:e=>({type:"SET_STORE_CREDITS_HISTORY_DATA",payload:e})},jc=(e=null,t)=>{switch(t.type){case fe.SET_STORE_CREDITS_DASHBOARD_DATA:{const{status:a}=t.payload;return{...e,status:a}}case fe.SET_STORE_CREDITS_HISTORY_DATA:{const{data:a}=t.payload;return{...e,history:a}}default:return e}};var re=(e=>(e.READ_STORE_CREDITS_CUSTOMERS="READ_STORE_CREDITS_CUSTOMERS",e.READ_STORE_CREDITS_CUSTOMER_STATUS="READ_STORE_CREDITS_CUSTOMER_STATUS",e.READ_STORE_CREDITS_CUSTOMER_ENTRIES="READ_STORE_CREDITS_CUSTOMER_ENTRIES",e.ADJUST_CUSTOMER_STORE_CREDITS="ADJUST_CUSTOMER_STORE_CREDITS",e.SET_STORE_CREDITS_CUSTOMERS="SET_STORE_CREDITS_CUSTOMERS",e.SET_STORE_CREDITS_CUSTOMER_STATUS="SET_STORE_CREDITS_CUSTOMER_STATUS",e.SET_STORE_CREDITS_CUSTOMER_BALANCE="SET_STORE_CREDITS_CUSTOMER_BALANCE",e))(re||{});const _e={readStoreCreditsCustomers:e=>({type:"READ_STORE_CREDITS_CUSTOMERS",payload:e}),readStoreCreditsCustomerStatus:e=>({type:"READ_STORE_CREDITS_CUSTOMER_STATUS",payload:e}),readStoreCreditsCustomerEntries:e=>({type:"READ_STORE_CREDITS_CUSTOMER_ENTRIES",payload:e}),adjustCustomerStoreCredits:e=>({type:"ADJUST_CUSTOMER_STORE_CREDITS",payload:e}),setStoreCreditsCustomers:e=>({type:"SET_STORE_CREDITS_CUSTOMERS",payload:e}),setStoreCreditsCustomerStatus:e=>({type:"SET_STORE_CREDITS_CUSTOMER_STATUS",payload:e}),setStoreCreditsCustomerBalance:e=>({type:"SET_STORE_CREDITS_CUSTOMER_BALANCE",payload:e})},Fc=(e=[],t)=>{let a;switch(t.type){case re.SET_STORE_CREDITS_CUSTOMERS:const{data:r}=t.payload;return r;case re.SET_STORE_CREDITS_CUSTOMER_STATUS:const{id:n,status:s,sources:c}=t.payload;return a=e.findIndex(i=>i.id===n),e[a]={...e[a],status:s,sources:c},[...e];case re.SET_STORE_CREDITS_CUSTOMER_BALANCE:const{balance:o,balance_raw:m}=t.payload;return a=e.findIndex(i=>i.id===t.payload.id),e[a]={...e[a],balance:o,balance_raw:m,status:[],sources:[]},[...e];default:return e}};var tt=(e=>(e.READ_DASHBOARD_WIDGETS_DATA="READ_DASHBOARD_WIDGETS_DATA",e.SET_DASHBOARD_WIDGETS_DATA="SET_DASHBOARD_WIDGETS_DATA",e))(tt||{});const oa={readDashboardWidgetsData:e=>({type:"READ_DASHBOARD_WIDGETS_DATA",payload:e}),setDashboardWidgetsData:e=>({type:"SET_DASHBOARD_WIDGETS_DATA",payload:e})},Gc=(e=null,t)=>{switch(t.type){case tt.SET_DASHBOARD_WIDGETS_DATA:{const{widgets:a}=t.payload;return a}default:return e}};var be=(e=>(e.READ_ADMIN_NOTICES="READ_ADMIN_NOTICES",e.SET_ADMIN_NOTICES="SET_ADMIN_NOTICES",e.DISMISS_ADMIN_NOTICE="DISMISS_ADMIN_NOTICE",e))(be||{});const at={readAdminNotices:e=>({type:"READ_ADMIN_NOTICES",payload:e}),setAdminNotices:e=>({type:"SET_ADMIN_NOTICES",payload:e}),dismissAdminNotice:e=>({type:"DISMISS_ADMIN_NOTICE",payload:e})},Hc=(e=[],t)=>{switch(t.type){case be.SET_ADMIN_NOTICES:{const{notices:a}=t.payload;return a}case be.DISMISS_ADMIN_NOTICE:{const{slug:a}=t.payload;return e.filter(n=>n.slug!==a)}default:return e}};var F=(e=>(e.READ_COUPON_TEMPLATES="READ_COUPON_TEMPLATES",e.READ_COUPON_TEMPLATE="READ_COUPON_TEMPLATE",e.READ_RECENT_COUPON_TEMPLATES="READ_RECENT_COUPON_TEMPLATES",e.READ_COUPON_TEMPLATE_CATEGORIES="READ_COUPON_TEMPLATE_CATEGORIES",e.READ_COUPON_TEMPLATE_CATEGORY="READ_COUPON_TEMPLATE_CATEGORY",e.CREATE_COUPON_FROM_TEMPLATE="CREATE_COUPON_FROM_TEMPLATE",e.DELETE_RECENT_COUPON_TEMPLATE="DELETE_RECENT_COUPON_TEMPLATE",e.SET_COUPON_TEMPLATES="SET_COUPON_TEMPLATES",e.SET_COUPON_TEMPLATE_CATEGORIES="SET_COUPON_TEMPLATE_CATEGORIES",e.UNSET_RECENT_COUPON_TEMPLATE="UNSET_RECENT_COUPON_TEMPLATE",e.SET_COUPON_TEMPLATES_LOADING="SET_COUPON_TEMPLATES_LOADING",e.SET_EDIT_COUPON_TEMPLATE="SET_EDIT_COUPON_TEMPLATE",e.SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE="SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE",e.VALIDATE_EDIT_COUPON_TEMPLATE_DATA="VALIDATE_EDIT_COUPON_TEMPLATE_DATA",e.SET_COUPON_CREATED_RESPONSE_DATA="SET_COUPON_CREATED_RESPONSE_DATA",e.CLEAR_COUPON_CREATED_RESPONSE_DATA="CLEAR_COUPON_CREATED_RESPONSE_DATA",e.TOGGLE_PREMIUM_MODAL="TOGGLE_PREMIUM_MODAL",e))(F||{});const q={readCouponTemplates:e=>({type:"READ_COUPON_TEMPLATES",payload:e}),readCouponTemplate:e=>({type:"READ_COUPON_TEMPLATE",payload:e}),readRecentCouponTemplates:e=>({type:"READ_RECENT_COUPON_TEMPLATES",payload:e}),readCouponTemplateCategories:e=>({type:"READ_COUPON_TEMPLATE_CATEGORIES",payload:e}),readCouponTemplateCategory:e=>({type:"READ_COUPON_TEMPLATE_CATEGORY",payload:e}),createCouponFromTemplate:e=>({type:"CREATE_COUPON_FROM_TEMPLATE",payload:e}),deleteRecentCouponTemplate:e=>({type:"DELETE_RECENT_COUPON_TEMPLATE",payload:e}),setCouponTemplates:e=>({type:"SET_COUPON_TEMPLATES",payload:e}),setCouponTemplateCategories:e=>({type:"SET_COUPON_TEMPLATE_CATEGORIES",payload:e}),unsetRecentCouponTemplate:e=>({type:"UNSET_RECENT_COUPON_TEMPLATE",payload:e}),setCouponTemplatesLoading:e=>({type:"SET_COUPON_TEMPLATES_LOADING",payload:e}),setEditCouponTemplate:e=>({type:"SET_EDIT_COUPON_TEMPLATE",payload:e}),setEditCouponTemplateFieldValue:e=>({type:"SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE",payload:e}),validateEditCouponTemplateData:()=>({type:"VALIDATE_EDIT_COUPON_TEMPLATE_DATA"}),setCreatedCouponResponseData:e=>({type:"SET_COUPON_CREATED_RESPONSE_DATA",payload:e}),clearCreatedCouponResponseData:()=>({type:"CLEAR_COUPON_CREATED_RESPONSE_DATA"}),togglePremiumModal:e=>({type:"TOGGLE_PREMIUM_MODAL",payload:e})},Vc=(e={loading:!1,templates:[],recent:[],review:[],edit:null,categories:[],formResponse:null,premiumModal:!1},t)=>{let a;switch(t.type){case F.SET_COUPON_TEMPLATES:{const{data:r,type:n="main"}=t.payload;switch(n){case"main":return{...e,templates:r};case"recent":return{...e,recent:r};case"review":return{...e,review:r}}}case F.SET_COUPON_TEMPLATE_CATEGORIES:{const{data:r}=t.payload;return{...e,categories:r}}case F.UNSET_RECENT_COUPON_TEMPLATE:{const{id:r}=t.payload,n=[...e.recent];return a=n.findIndex(s=>s.id===r),n.splice(a,1),{...e,recent:n}}case F.SET_COUPON_TEMPLATES_LOADING:{const{loading:r}=t.payload;return{...e,loading:r}}case F.SET_EDIT_COUPON_TEMPLATE:{const{data:r}=t.payload;return{...e,edit:r}}case F.SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE:{const{field:r,value:n}=t.payload,s={...e.edit};if(!s||!s.fields)return e;const c=s.fields.findIndex(o=>o.field===r);return c>-1&&(s.fields[c].value=n),{...e,edit:{...s}}}case F.VALIDATE_EDIT_COUPON_TEMPLATE_DATA:{const r={...e.edit};if(!r||!r.fields)return e;const n=r.fields.map(s=>(s.is_required&&!s.value?s.error="This field is required":s.error=void 0,s));return{...e,edit:{...r,fields:n}}}case F.SET_COUPON_CREATED_RESPONSE_DATA:{const{data:r}=t.payload;return{...e,formResponse:r}}case F.CLEAR_COUPON_CREATED_RESPONSE_DATA:{const r={...e.edit};return r.fields=r.fields.map(n=>{var s;return n.value=(s=n.pre_filled_value)!=null?s:"",n}),{...e,formResponse:null,edit:null}}case F.TOGGLE_PREMIUM_MODAL:{const{show:r}=t.payload;return{...e,premiumModal:r}}}return e};(function(){(function(e){(function(t){var a={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(d){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function r(d){return d&&DataView.prototype.isPrototypeOf(d)}if(a.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(d){return d&&n.indexOf(Object.prototype.toString.call(d))>-1};function c(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function o(d){return typeof d!="string"&&(d=String(d)),d}function m(d){var f={next:function(){var S=d.shift();return{done:S===void 0,value:S}}};return a.iterable&&(f[Symbol.iterator]=function(){return f}),f}function i(d){this.map={},d instanceof i?d.forEach(function(f,S){this.append(S,f)},this):Array.isArray(d)?d.forEach(function(f){this.append(f[0],f[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(f){this.append(f,d[f])},this)}i.prototype.append=function(d,f){d=c(d),f=o(f);var S=this.map[d];this.map[d]=S?S+", "+f:f},i.prototype.delete=function(d){delete this.map[c(d)]},i.prototype.get=function(d){return d=c(d),this.has(d)?this.map[d]:null},i.prototype.has=function(d){return this.map.hasOwnProperty(c(d))},i.prototype.set=function(d,f){this.map[c(d)]=o(f)},i.prototype.forEach=function(d,f){for(var S in this.map)this.map.hasOwnProperty(S)&&d.call(f,this.map[S],S,this)},i.prototype.keys=function(){var d=[];return this.forEach(function(f,S){d.push(S)}),m(d)},i.prototype.values=function(){var d=[];return this.forEach(function(f){d.push(f)}),m(d)},i.prototype.entries=function(){var d=[];return this.forEach(function(f,S){d.push([S,f])}),m(d)},a.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);function u(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function E(d){return new Promise(function(f,S){d.onload=function(){f(d.result)},d.onerror=function(){S(d.error)}})}function _(d){var f=new FileReader,S=E(f);return f.readAsArrayBuffer(d),S}function g(d){var f=new FileReader,S=E(f);return f.readAsText(d),S}function R(d){for(var f=new Uint8Array(d),S=new Array(f.length),D=0;D<f.length;D++)S[D]=String.fromCharCode(f[D]);return S.join("")}function h(d){if(d.slice)return d.slice(0);var f=new Uint8Array(d.byteLength);return f.set(new Uint8Array(d)),f.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:a.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:a.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():a.arrayBuffer&&a.blob&&r(d)?(this._bodyArrayBuffer=h(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||s(d))?this._bodyArrayBuffer=h(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var d=u(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(_)}),this.text=function(){var d=u(this);if(d)return d;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(R(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function O(d){var f=d.toUpperCase();return A.indexOf(f)>-1?f:d}function T(d,f){f=f||{};var S=f.body;if(d instanceof T){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,f.headers||(this.headers=new i(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!S&&d._bodyInit!=null&&(S=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=f.credentials||this.credentials||"same-origin",(f.headers||!this.headers)&&(this.headers=new i(f.headers)),this.method=O(f.method||this.method||"GET"),this.mode=f.mode||this.mode||null,this.signal=f.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&S)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(S)}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function y(d){var f=new FormData;return d.trim().split("&").forEach(function(S){if(S){var D=S.split("="),j=D.shift().replace(/\+/g," "),v=D.join("=").replace(/\+/g," ");f.append(decodeURIComponent(j),decodeURIComponent(v))}}),f}function C(d){var f=new i,S=d.replace(/\r?\n[\t ]+/g," ");return S.split(/\r?\n/).forEach(function(D){var j=D.split(":"),v=j.shift().trim();if(v){var ue=j.join(":").trim();f.append(v,ue)}}),f}w.call(T.prototype);function b(d,f){f||(f={}),this.type="default",this.status=f.status===void 0?200:f.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in f?f.statusText:"OK",this.headers=new i(f.headers),this.url=f.url||"",this._initBody(d)}w.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},b.error=function(){var d=new b(null,{status:0,statusText:""});return d.type="error",d};var k=[301,302,303,307,308];b.redirect=function(d,f){if(k.indexOf(f)===-1)throw new RangeError("Invalid status code");return new b(null,{status:f,headers:{location:d}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(d){t.DOMException=function(f,S){this.message=f,this.name=S;var D=Error(f);this.stack=D.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function G(d,f){return new Promise(function(S,D){var j=new T(d,f);if(j.signal&&j.signal.aborted)return D(new t.DOMException("Aborted","AbortError"));var v=new XMLHttpRequest;function ue(){v.abort()}v.onload=function(){var ee={status:v.status,statusText:v.statusText,headers:C(v.getAllResponseHeaders()||"")};ee.url="responseURL"in v?v.responseURL:ee.headers.get("X-Request-URL");var $e="response"in v?v.response:v.responseText;S(new b($e,ee))},v.onerror=function(){D(new TypeError("Network request failed"))},v.ontimeout=function(){D(new TypeError("Network request failed"))},v.onabort=function(){D(new t.DOMException("Aborted","AbortError"))},v.open(j.method,j.url,!0),j.credentials==="include"?v.withCredentials=!0:j.credentials==="omit"&&(v.withCredentials=!1),"responseType"in v&&a.blob&&(v.responseType="blob"),j.headers.forEach(function(ee,$e){v.setRequestHeader($e,ee)}),j.signal&&(j.signal.addEventListener("abort",ue),v.onreadystatechange=function(){v.readyState===4&&j.signal.removeEventListener("abort",ue)}),v.send(typeof j._bodyInit>"u"?null:j._bodyInit)})}return G.polyfill=!0,e.fetch||(e.fetch=G,e.Headers=i,e.Request=T,e.Response=b),t.Headers=i,t.Request=T,t.Response=b,t.fetch=G,Object.defineProperty(t,"__esModule",{value:!0}),t})({})})(typeof self<"u"?self:ya)})();const Yc=axios.CancelToken,x=axios.create({baseURL:wpApiSettings.root,timeout:0,headers:{"X-WP-Nonce":wpApiSettings.nonce,"X-ACFW-Context":"admin"}}),xe=new Map,Pe=e=>{const t=xe.get(e);t&&(t(),xe.delete(e))},J=e=>new Yc(t=>xe.set(e,t));function*qc(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload,s=t||"general_section";try{typeof a=="function"&&a();const c=yield U(()=>x.get("coupons/v1/settings/sections",{headers:{section:s}}));if(c&&c.data){const o=s?c.data.findIndex(m=>m.id===s):0;yield B(X.rehydrateStoreSettings({data:c.data[o]})),yield B(Oe.setStoreSectionItems({data:c.data})),typeof r=="function"&&r(c)}}catch(c){typeof n=="function"&&n({error:c})}}function*zc(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=t||"general_section",c=yield U(()=>x.get("coupons/v1/settings/sections/".concat(s)));c&&c.data&&(yield B(X.rehydrateStoreSettings({data:c.data})),yield B(Oe.setStoreSectionItem({data:c.data})),typeof r=="function"&&r(c))}catch(s){typeof n=="function"&&n({error:s})}}const Kc=[L(de.READ_SECTIONS,qc),L(de.READ_SECTION,zc)];function*Wc(e){const{data:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.post("coupons/v1/setting/sections",t));s&&s.data&&(yield B(X.rehydrateStoreSettings({})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s,payload:t})}}function*Qc(e){const{data:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{if(typeof a=="function"&&a(),!t.id)throw new Error("Can not update survey. No survey id provided.");const s=yield U(()=>{const{id:c,...o}=t;return x.put("coupons/v1/settings/".concat(c),o)});s&&s.data&&(yield B(X.rehydrateStoreSetting({id:s.data.id,data:s.data})),t.type==="module"&&(yield B(Oe.toggleModuleSection({module:t.id,show:t.value==="yes"}))),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s,payload:t})}}function*Jc(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.delete("coupons/v1/settings/".concat(t)));s&&s.data&&(yield B(X.rehydrateStoreSettings({})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*Xc(e){const{processingCB:t,successCB:a,failCB:r}=e.payload;try{typeof t=="function"&&t();const n=yield U(()=>x.get("coupons/v1/settings/"));n&&n.data&&(yield B(X.rehydrateStoreSettings({data:n.data})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}function*Zc(e){const{data:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{if(typeof a=="function"&&a(),t){let s=t.fields.filter(c=>c.type!=="title"&&c.type!=="sectionend");s=s.map(c=>({id:c.id,value:c.value})),yield B(X.setStoreSettingItems({data:s})),typeof r=="function"&&r(s)}}catch(s){typeof n=="function"&&n({error:s})}}function*eo(e){const{id:t,data:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{if(typeof r=="function"&&r(),a)yield B(X.setStoreSettingItem({data:a})),typeof n=="function"&&n(a);else{const c=yield U(()=>x.get("coupons/v1/settings/".concat(t)));c&&c.data&&(yield B(X.setStoreSettingItem({data:c.data})),typeof n=="function"&&n(c))}}catch(c){typeof s=="function"&&s({error:c})}}const to=[L(te.CREATE_SETTING,Wc),L(te.UPDATE_SETTING,Qc),L(te.DELETE_SETTING,Jc),L(te.READ_SETTINGS,Xc),L(te.REHYDRATE_STORE_SETTINGS,Zc),L(te.REHYDRATE_STORE_SETTING,eo)];function*ao(e){const{startPeriod:t,endPeriod:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{typeof r=="function"&&r();const c=yield U(()=>x.get("store-credits/v1/customers/status",{params:{startPeriod:t,endPeriod:a},cancelToken:J("scdashboard")}));c&&c.data&&(yield B(Ne.setStoreCreditsDashboardData({status:c.data})),typeof n=="function"&&n(c))}catch(c){typeof s=="function"&&s({error:c})}}function*no(e){const{page:t,startPeriod:a,endPeriod:r,processingCB:n,successCB:s,failCB:c}=e.payload;try{typeof n=="function"&&n();const o=yield U(()=>x.get("store-credits/v1/entries",{params:{page:t,startPeriod:a,endPeriod:r,is_admin:!0}}));o&&o.data&&B&&(yield B(Ne.setStoreCreditsHistoryData({data:o.data})),typeof s=="function"&&s(o))}catch(o){typeof c=="function"&&c({error:o})}}const ro=[L(fe.READ_STORE_CREDITS_DASHBOARD_DATA,ao),L(fe.READ_STORE_CREDITS_HISTORY_DATA,no)];function*so(e){const{params:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.get("store-credits/v1/customers",{params:t,cancelToken:J("customer_search")}));s&&s.data&&(yield B(_e.setStoreCreditsCustomers({data:s.data})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*co(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{if(typeof a=="function"&&a(),!t)throw new Error("Can't fetch data. No customer ID was provided.");const s=yield U(()=>x.get("store-credits/v1/customers/".concat(t)));s&&s.data&&(yield B(_e.setStoreCreditsCustomerStatus({id:t,status:s.data.status,sources:s.data.sources})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*oo(e){const{id:t,page:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{if(typeof r=="function"&&r(),!t)throw new Error("Can't fetch data. No customer ID was provided.");const c=yield U(()=>x.get("store-credits/v1/entries",{params:{user_id:t,page:a!=null?a:1,is_admin:!0}}));c&&c.data&&typeof n=="function"&&n(c)}catch(c){typeof s=="function"&&s({error:c})}}function*lo(e){const{id:t,type:a,amount:r,processingCB:n,successCB:s,failCB:c}=e.payload;try{if(typeof n=="function"&&n(),!t)throw new Error("Can't adjust store credits. No customer ID was provided.");const o=yield U(()=>x.post("store-credits/v1/entries",{user_id:t,type:a,amount:r,action:"admin_".concat(a)}));o&&o.data&&typeof s=="function"&&s(o)}catch(o){typeof c=="function"&&c({error:o})}}const io=[L(re.READ_STORE_CREDITS_CUSTOMERS,so),L(re.READ_STORE_CREDITS_CUSTOMER_STATUS,co),L(re.READ_STORE_CREDITS_CUSTOMER_ENTRIES,oo),L(re.ADJUST_CUSTOMER_STORE_CREDITS,lo)];function*uo(e){const{startPeriod:t,endPeriod:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{typeof r=="function"&&r();const c=yield U(()=>x.get("coupons/v1/reports",{params:{startPeriod:t,endPeriod:a},cancelToken:J("dashboardwidgets")}));c&&c.data&&(yield B(oa.setDashboardWidgetsData({widgets:c.data})),typeof n=="function"&&n(c))}catch(c){typeof s=="function"&&s({error:c})}}const mo=[L(tt.READ_DASHBOARD_WIDGETS_DATA,uo)];function*po(e){const{processingCB:t,successCB:a,failCB:r}=e.payload;try{typeof t=="function"&&t();const n=yield U(()=>x.get("coupons/v1/reports/notices"));n&&n.data&&(yield B(at.setAdminNotices({notices:n.data})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}const fo=[L(be.READ_ADMIN_NOTICES,po)];function*Eo(e){const{isReview:t=!1,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.get("coupons/v1/templates",{cancelToken:J("coupon_templates"),params:t?{is_review:1}:{}}));s&&s.data&&(yield B(q.setCouponTemplates({data:s.data,type:t?"review":"main"})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*_o(e){const{id:t,isReview:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{typeof r=="function"&&r();const c=yield U(()=>x.get("coupons/v1/templates/".concat(t),{cancelToken:J("coupon_template"),params:a?{is_review:1}:{}}));c&&c.data&&(c.data.fields=c.data.fields.map(o=>{var m;return o.value=(m=o.pre_filled_value)!=null?m:"",o}),typeof n=="function"&&n(c))}catch(c){typeof s=="function"&&s({error:c})}}function*go(e){const{processingCB:t,successCB:a,failCB:r}=e.payload;try{typeof t=="function"&&t();const n=yield U(()=>x.get("coupons/v1/templates/recent",{cancelToken:J("recent_coupon_templates")}));n&&n.data&&(yield B(q.setCouponTemplates({data:n.data,type:"recent"})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}function*ho(e){const{processingCB:t,successCB:a,failCB:r}=e.payload;try{typeof t=="function"&&t();const n=yield U(()=>x.get("coupons/v1/templates/categories",{cancelToken:J("coupon_template_categories")}));n&&n.data&&(yield B(q.setCouponTemplateCategories({data:n.data})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}function*yo(e){const{slug:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.get("coupons/v1/templates/categories/".concat(t),{cancelToken:J("coupon_template_category")}));s&&s.data&&(yield B(q.setCouponTemplates({data:s.data})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*Ro(e){const{data:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.post("coupons/v1/templates",t,{cancelToken:J("coupon_template_create")}));s&&s.data&&typeof r=="function"&&r(s)}catch(s){typeof n=="function"&&n({error:s})}}function*So(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.delete("coupons/v1/templates/recent/".concat(t),{cancelToken:J("coupon_template_delete")}));typeof r=="function"&&r(s)}catch(s){typeof n=="function"&&n({error:s})}}const To=[L(F.READ_COUPON_TEMPLATES,Eo),L(F.READ_COUPON_TEMPLATE,_o),L(F.READ_RECENT_COUPON_TEMPLATES,go),L(F.READ_COUPON_TEMPLATE_CATEGORIES,ho),L(F.READ_COUPON_TEMPLATE_CATEGORY,yo),L(F.CREATE_COUPON_FROM_TEMPLATE,Ro),L(F.DELETE_RECENT_COUPON_TEMPLATE,So)];function*Co(){yield xt([...Kc,...to,...io,...ro,...mo,...fo,...To])}const bo=e=>jt(...e);function wo(e=void 0){const t=Lt(),a=Bt(Ut({sections:Lc,settingValues:Bc,page:Uc,storeCreditsDashboard:jc,storeCreditsCustomers:Fc,dashboardWidgets:Gc,adminNotices:Hc,couponTemplates:Vc}),e,bo([t]));return t.run(Co),a}const nt=e=>{const{hideUpgrade:t}=e,{app_pages:a,premium_page:r}=acfwAdminApp,[n]=a.filter(s=>s.slug==="acfw-premium");return React.createElement("div",{className:"acfw-logo-div"},n?React.createElement(React.Fragment,null,React.createElement("a",{href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=logo",target:"_blank",rel:"noreferrer"},React.createElement("img",{className:"acfw-logo",src:acfwAdminApp.logo,alt:"acfw logo"})),!t&&React.createElement("a",{className:"acfw-header-upgrade-btn",href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=upgrade",target:"_blank",rel:"noreferrer"},r.upgrade)):React.createElement("img",{className:"acfw-logo",src:acfwAdminApp.logo,alt:"acfw logo"}))},se=e=>{var n;const{title:t,className:a,description:r}=e;return(n=e.hideUpgrade)!=null,React.createElement("div",{className:"page-header ".concat(a!=null?a:"")},React.createElement(nt,{hideUpgrade:!0}),!!t&&React.createElement("h1",null,t),!!r&&React.createElement("p",null,r))},vo=()=>{const{admin_url:e,dashboard_page:{create_coupon:t}}=acfwAdminApp;return React.createElement("div",{className:"quick-create-coupon"},React.createElement("span",{className:"label"},"".concat(t.label,":")),React.createElement(P,{type:"primary",href:"".concat(e,"post-new.php?post_type=shop_coupon&type=percent"),target:"_blank",size:"small",ghost:!0},t.percentage),React.createElement(P,{type:"primary",href:"".concat(e,"post-new.php?post_type=shop_coupon&type=fixed_cart"),target:"_blank",size:"small",ghost:!0},t.fixed),React.createElement(P,{type:"primary",href:"".concat(e,"post-new.php?post_type=shop_coupon&type=acfw_bogo"),target:"_blank",size:"small",ghost:!0},t.bogo))},Ao=e=>{const{notice:{slug:t,content:a,type:r,nonce:n,actions:s,is_dismissable:c},onDismiss:o}=e,{dashboard_page:{labels:m}}=acfwAdminApp;return React.createElement(V,{className:"single-notice notice-".concat(r," ").concat(t,"-notice")},React.createElement("div",{className:"notice-content"},a.map((i,u)=>React.createElement("p",{key:u,dangerouslySetInnerHTML:{__html:i}}))),React.createElement("div",{className:"notice-actions"},s.map((i,u)=>React.createElement(P,{key:i.key,type:u===0?"primary":"default",href:i.link?i.link.replace(/&amp;/g,"&"):void 0,target:i!=null&&i.is_external?"_blank":void 0,onClick:i!=null&&i.response?()=>o(t,n,i.response):void 0},i.text)),c&&t!=="review_request"&&React.createElement(P,{onClick:()=>o(t,n)},m.dismiss)),c&&React.createElement(P,{className:"dismiss-notice-icon",icon:React.createElement(zt,null),size:"small",type:"text",shape:"circle",onClick:()=>o(t,n,t==="review_request"?"snooze":"dismissed")}))};const{dismissAdminNotice:Oo}=at,No=e=>{const{notices:t,actions:a}=e,[r,n]=p.useState(1),[s,c]=p.useState(0),o=p.useRef(null),{dashboard_page:{labels:m}}=acfwAdminApp,i=(u,E,_="yes")=>{a.dismissAdminNotice({slug:u}),jQuery.ajax({method:"post",url:ajaxurl,data:{action:"acfw_dismiss_admin_notice",notice:u,nonce:E,response:_},dataType:"json"})};return p.useEffect(()=>{t.length&&!window.lodash.isNull(o)&&c(o.current.clientHeight)}),0>=t.length?null:React.createElement("div",{className:"dashboard-notices"},React.createElement("h2",null,m.notices),React.createElement("div",{className:"list-overflow",style:{height:0<s?s+5:"auto"}},React.createElement("div",{className:"notices-list",ref:o},t.slice(0,r).map(u=>React.createElement(Ao,{key:u.slug,notice:u,onDismiss:i})))),1<t.length&&React.createElement(ae,null,React.createElement(P,{className:"toggle-view-all",size:"small",type:"primary",onClick:()=>n(1>=r?t.length:1),ghost:!0},1>=r?m.view_all:m.hide)))},Po=e=>({notices:e.adminNotices}),Do=e=>({actions:$({dismissAdminNotice:Oo},e)}),Io=I(Po,Do)(No),la=()=>React.createElement("svg",{width:"14",height:"15",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",{clipPath:"url(#clip0_559_38)"},React.createElement("path",{d:"M7.5 1.875C7.5 1.35732 7.91895 0.9375 8.4375 0.9375H12.1611C12.3135 0.9375 12.4365 0.962695 12.5449 1.00869C12.6299 1.0541 12.7588 1.12119 12.8496 1.20996C12.8496 1.21143 12.8496 1.21289 12.8525 1.21406C13.0342 1.39629 13.0986 1.63418 13.125 1.87207C13.125 1.87324 13.125 1.87412 13.125 1.875V5.625C13.125 6.14355 12.7061 6.5625 12.1875 6.5625C11.6689 6.5625 11.25 6.14355 11.25 5.625V4.13965L6.28711 9.09961C5.9209 9.46582 5.3291 9.46582 4.96289 9.09961C4.59668 8.7334 4.59668 8.1416 4.96289 7.77539L9.92285 2.8125H8.4375C7.91895 2.8125 7.5 2.39268 7.5 1.875ZM0 3.75C0 2.71436 0.839356 1.875 1.875 1.875H4.6875C5.20605 1.875 5.625 2.29482 5.625 2.8125C5.625 3.33105 5.20605 3.75 4.6875 3.75H1.875V12.1875H10.3125V9.375C10.3125 8.85645 10.7314 8.4375 11.25 8.4375C11.7686 8.4375 12.1875 8.85645 12.1875 9.375V12.1875C12.1875 13.2217 11.3467 14.0625 10.3125 14.0625H1.875C0.839356 14.0625 0 13.2217 0 12.1875V3.75Z",fill:"#4A86FB"})),React.createElement("defs",null,React.createElement("clipPath",{id:"clip0_559_38"},React.createElement("rect",{width:"13.125",height:"15",fill:"white"})))),ia=e=>{const{content:t}=e;return React.createElement("span",{className:"tooltip"},React.createElement(Ke,{overlayClassName:"dashboard-tooltip",placement:"top",content:React.createElement("span",{dangerouslySetInnerHTML:{__html:t}}),trigger:"click"},React.createElement(Fa,null)))},$o=e=>{var n;const{widget:t,onClickLink:a}=e,r=(n=t.page_link)!=null?n:!1;return React.createElement(V,{className:"widget big-number-widget"},React.createElement("p",{className:"title"},React.createElement("span",{className:"widget-value",dangerouslySetInnerHTML:{__html:t.title_html}}),t!=null&&t.tooltip_html?React.createElement(ia,{content:t.tooltip_html}):null),React.createElement("p",{className:"description"},React.createElement("span",{className:"widget-name",dangerouslySetInnerHTML:{__html:t.description_html}}),r?React.createElement("a",{onClick:()=>a(r),href:"javascript:void(0);"},React.createElement(la,null)):null))},ko=e=>{const{widget:t}=e,{dashboard_page:{labels:a,coupons_list_link:r},admin_url:n}=acfwAdminApp,s=[{title:a.coupon,dataIndex:"coupon",key:"coupon",render:(c,o)=>React.createElement("a",{href:"".concat(n,"post.php?post=").concat(o.id,"&action=edit"),target:"_blank",rel:"noreferrer"},c)},{title:a.uses,dataIndex:"usage_total",key:"usage_total"},{title:React.createElement(React.Fragment,null,React.createElement("span",{className:"discounted-label"},a.discounted),t!=null&&t.tooltip_html?React.createElement(ia,{content:t.tooltip_html}):null),dataIndex:"discount_total",key:"discount_total"}];return React.createElement("div",{className:"widget coupon-table-widget"},React.createElement("div",{className:"widget-header"},React.createElement("h3",{className:"widget-name",dangerouslySetInnerHTML:{__html:t.title_html}}),React.createElement("a",{href:r,target:"_blank",rel:"noreferrer"},React.createElement(la,null))),t.table_data&&React.createElement(le,{bordered:!0,dataSource:t.table_data,columns:s,pagination:!1}))},Mo=e=>{const{widget:t}=e;return React.createElement(V,{className:"widget upsell-widget"},React.createElement("p",{className:"title widget-name",dangerouslySetInnerHTML:{__html:t.title_html}}),React.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:t.description_html}}))},Z=function(){return acfwAdminApp.admin_url.replace(location.origin,"")},ua=e=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e),xo=e=>{let t=window.moment().startOf("month"),a=window.moment().startOf("day");switch(e){case"week_to_date":t=window.moment().startOf("week"),a=window.moment().startOf("day");break;case"month_to_date":t=window.moment().startOf("month"),a=window.moment().startOf("day");break;case"quarter_to_date":t=window.moment().startOf("quarter"),a=window.moment().startOf("day");break;case"year_to_date":t=window.moment().startOf("year"),a=window.moment().startOf("day");break;case"last_week":t=window.moment().subtract(1,"weeks").startOf("week"),a=window.moment().subtract(1,"weeks").endOf("week");break;case"last_month":t=window.moment().subtract(1,"months").startOf("month"),a=window.moment().subtract(1,"months").endOf("month");break;case"last_quarter":t=window.moment().subtract(1,"quarters").startOf("quarter"),a=window.moment().subtract(1,"quarters").endOf("quarter");break;case"last_year":t=window.moment().subtract(1,"years").startOf("year"),a=window.moment().subtract(1,"years").endOf("year");break}return[t,a]};function da(e){return e.type==="increase"?"+":"-"}const{setStorePage:Lo}=ie,Bo=e=>{const{widgets:t,actions:a}=e,r=Q(),n=s=>{r.push("".concat(Z(),"admin.php?page=").concat(s)),a.setStorePage({data:s})};return t?React.createElement("div",{className:"report-widgets"},t.map(s=>{switch(s.type){case"big_number":return React.createElement($o,{key:s.key,widget:s,onClickLink:n});case"table":return React.createElement(ko,{key:s.key,widget:s});case"upsell":return React.createElement(Mo,{key:s.key,widget:s});case"section_title":return React.createElement("h2",{key:s.key,className:"section-title"},s.title_html)}return null})):null},Uo=e=>({actions:$({setStorePage:Lo},e)}),jo=I(null,Uo)(Bo),Fo=e=>{const{store_credits_page:{labels:t,period_options:a}}=acfwAdminApp,{className:r,periodValue:n,startPeriod:s,endPeriod:c,onPeriodChange:o,onCustomDateRange:m}=e;return React.createElement("div",{className:"report-date-range-picker ".concat(r)},React.createElement(W,{value:n,onSelect:o},a.map((i,u)=>React.createElement(W.Option,{key:u,value:i.value},i.label))),React.createElement(We.RangePicker,{value:[s,c],onChange:m}))},Go=()=>React.createElement("div",{className:"report-widgets"},[...Array(8)].map((e,t)=>React.createElement(V,{key:t,className:"widget widget-skeleton"},React.createElement(z,{active:!0})))),Le=e=>{const{iconKey:t}=e;return t==="getting_started"?React.createElement(Qt,null):t==="documentation"?React.createElement(Qa,null):t==="settings"?React.createElement(Jt,null):t==="support"?React.createElement(Qe,null):t==="active"?React.createElement(Ja,null):t==="inactive"?React.createElement(Xa,null):t==="expired"?React.createElement(Za,null):t==="learn_more"?React.createElement(Xt,null):null},Ho=e=>{const{slug:t,label:a,link:r,onClick:n}=e;return r.includes("http")?React.createElement("a",{href:r,target:"_blank",rel:"noreferrer"},React.createElement(Le,{iconKey:t}),a):React.createElement("a",{onClick:()=>n&&n(r),href:"javascript:void(0);"},React.createElement(Le,{iconKey:t}),a)},Vo=e=>{const{name:t,campaign:a,status:r}=e,{dashboard_page:{labels:n}}=acfwAdminApp;let s;if(r==="learn_more"){const c="https://advancedcouponsplugin.com/pricing/?tab=premium&utm_source=acfwf&utm_medium=dashboard&utm_campaign=".concat(a);s='<a class="'.concat(r,'" href="').concat(c,'" target="_blank" href="javascript:void(0);">').concat(n[r],"</a>")}else s='<span class="plugin-status '.concat(r,'">').concat(n[r],"</span>");return React.createElement(React.Fragment,null,React.createElement(Le,{iconKey:r}),React.createElement("span",{className:"plugin-name",dangerouslySetInnerHTML:{__html:"".concat(t," (").concat(s,")")}}))},{setStorePage:Yo}=ie,qo=Z(),zo=e=>{const{actions:t}=e,a=Q(),[r,n]=p.useState([]),[s,c]=p.useState(!0),{dashboard_page:{labels:o,resources_links:m}}=acfwAdminApp;p.useEffect(()=>{x.get("coupons/v1/reports/license").then(u=>{n(u.data),c(!1)})},[]);const i=u=>{a.push("".concat(qo,"admin.php?page=").concat(u)),t.setStorePage({data:u})};return React.createElement("div",{className:"sidebar-inner"},React.createElement(ge,{className:"resources-section sidebar-section",header:React.createElement("h2",null,"".concat(o.helpful_resources,":")),dataSource:m,renderItem:u=>React.createElement(ge.Item,{key:u.key},React.createElement(Ho,{...u,onClick:i}))}),React.createElement(ge,{className:"plugins-section sidebar-section",header:React.createElement("h2",null,"".concat(o.license_activation_status,":")),loading:s,dataSource:r,renderItem:u=>React.createElement(ge.Item,{key:u.key},React.createElement(Vo,{...u}))}),React.createElement("p",{className:"view-licenses"},React.createElement("a",{onClick:()=>i("acfw-license")},o.view_licenses)))},Ko=e=>({actions:$({setStorePage:Yo},e)}),Wo=I(null,Ko)(zo);const{readDashboardWidgetsData:Qo}=oa,Jo=e=>{const{widgets:t,actions:a}=e,[r,n]=p.useState("month_to_date"),[s,c]=p.useState(window.moment().startOf("month")),[o,m]=p.useState(window.moment().startOf("day")),[i,u]=p.useState(!1),{dashboard_page:{title:E}}=acfwAdminApp;p.useEffect(()=>{u(!0),Pe("dashboardwidgets"),a.readDashboardWidgetsData({startPeriod:s.format("YYYY-MM-DD"),endPeriod:o.format("YYYY-MM-DD"),successCB:()=>u(!1)})},[s,o]);const _=R=>{if(R===r)return;const[h,w]=xo(R);n(R),c(h),m(w)},g=R=>{var h,w;R&&(c((h=R[0])!=null?h:""),m((w=R[1])!=null?w:""),n("custom"))};return React.createElement("div",{className:"dashboard-page"},React.createElement(se,{title:E,className:"dashboard-header"}),React.createElement(H,{gutter:16},React.createElement(N,{className:"dashboard-content",span:18},React.createElement(Io,null),React.createElement(vo,null),React.createElement(Fo,{periodValue:r,startPeriod:s,endPeriod:o,onPeriodChange:_,onCustomDateRange:g}),i?React.createElement(Go,null):React.createElement(jo,{widgets:t})),React.createElement(N,{className:"dashboard-sidebar",span:6},React.createElement(Wo,null))))},Xo=e=>({widgets:e.dashboardWidgets}),Zo=e=>({actions:$({readDashboardWidgetsData:Qo},e)}),el=I(Xo,Zo)(Jo),{readStoreCreditsHistoryData:tl}=Ne,al=e=>{const{entries:t,actions:a,filter:r}=e,{store_credits_page:{labels:n}}=acfwAdminApp,[s,c]=p.useState(1),[o,m]=p.useState(!0),[i,u]=p.useState(0),{beforeDate:E,afterDate:_}=r;p.useEffect(()=>{m(!0),a.readStoreCreditHistory({page:s,startPeriod:E.format("YYYY-MM-DD"),endPeriod:_.format("YYYY-MM-DD"),successCB:R=>{u(R.headers["x-total"]),m(!1)}})},[s,E,_]),p.useEffect(()=>{t&&t.length&&m(!1)},[t,m]);const g=[{title:n.customer_name,dataIndex:"customer_name",key:"customer_name"},{title:n.email,dataIndex:"customer_email",key:"customer_email"},{title:n.amount,dataIndex:"amount",key:"amount",render:(R,h)=>"".concat(da(h)).concat(R)},{title:n.activity,dataIndex:"activity",key:"activity"},{title:n.related,dataIndex:"rel_label",key:"rel_label",render:(R,h)=>h.rel_link?React.createElement("a",{href:h.rel_link,target:"_blank"},R):R},{title:n.date,dataIndex:"date",key:"date"}];return React.createElement(V,{className:"acfw-dashboard-history",title:n.history},React.createElement(le,{loading:o,pagination:!1,dataSource:t,columns:g}),i>10&&React.createElement(ve,{disabled:o,current:s,total:i,onChange:c,showSizeChanger:!1}))},nl=e=>{var t;return{entries:(t=e.storeCreditsDashboard)==null?void 0:t.history}},rl=e=>({actions:$({readStoreCreditHistory:tl},e)}),sl=I(nl,rl)(al);const{readStoreCreditsDashboardData:cl}=Ne,ol=e=>{const{status:t,actions:a}=e,{store_credits_page:{labels:r,period_options:n}}=acfwAdminApp,[s,c]=p.useState(!1),[o,m]=p.useState("month_to_date"),[i,u]=p.useState(window.moment().startOf("month")),[E,_]=p.useState(window.moment().startOf("day")),[g,R]=p.useState({periodValue:"month_to_date",beforeDate:window.moment().startOf("month"),afterDate:window.moment().startOf("day")}),h=T=>{R(T)},w=[{title:r.statistics,dataIndex:"label",key:"label"},{title:r.amount,dataIndex:"amount",key:"amount"}];p.useEffect(()=>{c(!0),Pe("scdashboard"),a.readDashboardData({startPeriod:i.format("YYYY-MM-DD"),endPeriod:E.format("YYYY-MM-DD"),successCB:()=>c(!1)})},[i,E]);const A=T=>{m(T);let y,C;switch(T){case"week_to_date":y=window.moment().startOf("week"),C=window.moment().startOf("day");break;case"month_to_date":y=window.moment().startOf("month"),C=window.moment().startOf("day");break;case"quarter_to_date":y=window.moment().startOf("quarter"),C=window.moment().startOf("day");break;case"year_to_date":y=window.moment().startOf("year"),C=window.moment().startOf("day");break;case"last_week":y=window.moment().subtract(1,"weeks").startOf("week"),C=window.moment().subtract(1,"weeks").endOf("week");break;case"last_month":y=window.moment().subtract(1,"months").startOf("month"),C=window.moment().subtract(1,"months").endOf("month");break;case"last_quarter":y=window.moment().subtract(1,"quarters").startOf("quarter"),C=window.moment().subtract(1,"quarters").endOf("quarter");break;case"last_year":y=window.moment().subtract(1,"years").startOf("year"),C=window.moment().subtract(1,"years").endOf("year");break;default:y=window.moment().startOf("day"),C=window.moment().startOf("day");break}u(y),_(C),h({periodValue:T,beforeDate:y,afterDate:C})},O=T=>{u(T[0]),_(T[1]),m("custom"),h({periodValue:"custom",beforeDate:T[0],afterDate:T[1]})};return React.createElement(React.Fragment,null,React.createElement("div",{className:"store-credits-period-selector"},React.createElement(W,{value:o,onSelect:A},n.map(T=>React.createElement(W.Option,{value:T.value},T.label))),React.createElement(We.RangePicker,{value:[i,E],onChange:O})),React.createElement(V,{title:r.status},React.createElement(le,{loading:s,pagination:!1,dataSource:t,columns:w})),React.createElement(ae,null),React.createElement(sl,{filter:g}))},ll=e=>{var t;return{status:(t=e.storeCreditsDashboard)==null?void 0:t.status}},il=e=>({actions:$({readDashboardData:cl},e)}),ul=I(ll,il)(ol),dl=(e,t)=>{switch(t.type){case"SET_PAGE":return{...e,page:t.value};case"SET_PER_PAGE":return{...e,per_page:t.value};case"SET_SEARCH":return{...e,search:t.value,page:1};case"SET_SORT_BY":return{...e,sort_by:t.value};case"SET_SORT_ORDER":return{...e,sort_order:t.value};case"SET_META_KEY":return{...e,meta_key:t.value};case"SET_QUERY":return t.value}return e},ma=p.createContext({params:{page:1},dispatchParams:e=>{}}),ml=({children:e})=>{const t={page:1},[a,r]=p.useReducer(dl,t);return React.createElement(ma.Provider,{value:{params:a,dispatchParams:r}},e)},pl=e=>{const{status:t}=e,[a,r]=p.useState(!0),{store_credits_page:{labels:n}}=acfwAdminApp,s=[{title:n.statistics,dataIndex:"label",key:"label"},{title:n.amount,dataIndex:"amount",key:"amount"}];return p.useEffect(()=>{t&&t.length?r(!1):r(!0)},[t,r]),React.createElement(V,{className:"customer-status",title:n.status},React.createElement(le,{loading:a,pagination:!1,dataSource:t,columns:s}))},fl=e=>{const{sources:t}=e,{store_credits_page:{labels:a}}=acfwAdminApp,r=[{title:a.source,dataIndex:"label",key:"label"},{title:a.amount,dataIndex:"amount",key:"amount"}];return React.createElement(V,{className:"customer-sources",title:a.sources},React.createElement(le,{loading:!t||!t.length,pagination:!1,dataSource:t,columns:r}))},El=e=>{const{entries:t,total:a,loadEntries:r,loaded:n}=e,{store_credits_page:{labels:s}}=acfwAdminApp,[c,o]=p.useState(1),m=[{title:s.date,dataIndex:"date",key:"date"},{title:s.activity,dataIndex:"activity",key:"activity"},{title:s.amount,dataIndex:"amount",key:"amount",render:(u,E)=>"".concat(da(E)).concat(u)},{title:s.related,dataIndex:"rel_label",key:"rel_label",render:(u,E)=>E.rel_link?React.createElement("a",{href:E.rel_link,target:"_blank"},u):u}],i=u=>{o(u),r(u)};return React.createElement(V,{className:"customer-entries",title:s.history},React.createElement(le,{loading:!n,columns:m,dataSource:t,pagination:!1}),0<a&&React.createElement(ve,{defaultCurrent:c,current:c,hideOnSinglePage:!0,disabled:!t||!t.length,total:a,pageSize:10,showSizeChanger:!1,onChange:i}))},{readStoreCreditsCustomerStatus:_l,readStoreCreditsCustomerEntries:gl}=_e,hl=e=>{var w,A;const{customer:t,setCustomer:a,actions:r}=e,[n,s]=p.useState((w=t==null?void 0:t.status)!=null?w:[]),[c,o]=p.useState((A=t==null?void 0:t.sources)!=null?A:[]),[m,i]=p.useState([]),[u,E]=p.useState(0),[_,g]=p.useState(!1),R=(O=1)=>{t!=null&&t.id&&(g(!1),r.readStoreCreditsCustomerEntries({id:t==null?void 0:t.id,page:O,successCB:T=>{i(T.data),E(T.headers["x-total"]),g(!0)}}))},h=()=>{a(null),o([]),i([])};return p.useEffect(()=>{if(!(t!=null&&t.id)){s([]),o([]),i([]),E(0);return}r.readStoreCreditsCustomerStatus({id:t==null?void 0:t.id,successCB:O=>{s(O.data.status),o(O.data.sources)}}),R()},[t]),t?React.createElement(Ee,{width:1100,visible:!window.lodash.isNull(t),footer:!1,onCancel:()=>h(),onOk:()=>h()},React.createElement("h2",null,"".concat(t.first_name," ").concat(t.last_name," Stats")),React.createElement(H,{gutter:16},React.createElement(N,{span:12},React.createElement(pl,{status:n})),React.createElement(N,{span:12},React.createElement(fl,{sources:c}))),React.createElement(ae,null),React.createElement(El,{entries:m,total:u,loadEntries:R,loaded:_})):null},yl=e=>({actions:$({readStoreCreditsCustomerStatus:_l,readStoreCreditsCustomerEntries:gl},e)}),Rl=I(null,yl)(hl);function Sl({precision:e=null,decimalSeparator:t=".",thousandSeparator:a=","},r){if(window.lodash.isNull(e)){const[,m]=r.toString().split(".");e=m?m.length:0}let n=r.toFixed(e),[s,c]=n.split(".");const o=/(\d+)(\d{3})/;for(;o.test(s);)s=s.replace(o,"$1"+a+"$2");return"".concat(s).concat(t).concat(c)}function Tl(e,t=!1){const{currency:a}=acfwAdminApp.store_credits_page,r={precision:a.decimals,decimalSeparator:a.decimal_separator,thousandSeparator:a.thousand_separator},n=Sl(r,e);return n===""?n:"".concat(a.symbol).concat(n)}function Cl(e){const{currency:t}=acfwAdminApp.store_credits_page,a=new RegExp("[^-0-9%\\".concat(t.decimal_separator,"]+"),"gi"),r=new RegExp("[^\\".concat(t.decimal_separator,'"]'),"gi");let n=e.replace(a,"");1<n.replace(r,"").length&&(n=n.replace(r,""));const s=parseFloat(n.replace(t.decimal_separator,"."));return e===n&&s>0}function Se(e){const{currency:t}=acfwAdminApp.store_credits_page;return parseFloat(e.replace(t.decimal_separator,"."))}const{adjustCustomerStoreCredits:bl,setStoreCreditsCustomerBalance:wl}=_e,vl=e=>{const{customer:t,setAdjustCustomer:a,actions:r}=e,{adjust_modal:n,currency:s}=acfwAdminApp.store_credits_page,[c,o]=p.useState(!1),[m,i]=p.useState("increase"),[u,E]=p.useState(""),[_,g]=p.useState(""),R=()=>{if(t){if(!Cl(u)){Y.error(n.invalid_price);return}o(!0),r.adjustCustomerStoreCredits({id:t==null?void 0:t.id,type:m,amount:Se(u),successCB:h=>{o(!1),Y.success(h.data.message),r.setStoreCreditsCustomerBalance({id:t==null?void 0:t.id,balance:h.data.balance,balance_raw:h.data.balance_raw}),a(null),E(""),i("increase")},failCB:({error:h})=>{o(!1),Y.error(h.response.data.message)}})}};return p.useEffect(()=>{if(!t||!u){g("");return}const h=m==="increase"?t.balance_raw+Se(u):t.balance_raw-Se(u);g(Tl(Math.max(0,h)))},[t,u,m]),t?React.createElement("div",{className:"adjust-store-credits"},React.createElement("h2",null,n.title),React.createElement("p",{className:"description"},n.description),React.createElement("h3",{className:"current-balance"},n.current_balance.replace("{balance}",t.balance)),React.createElement("div",{className:"adjust-store-credits-form"},React.createElement(W,{value:m,onSelect:h=>i(h)},React.createElement(W.Option,{value:"increase"},n.increase),React.createElement(W.Option,{value:"decrease"},n.decrease)),React.createElement(K,{value:u,onChange:h=>E(h.target.value),addonBefore:s.symbol,allowClear:!0})),_?React.createElement("h3",{className:"new-balance",dangerouslySetInnerHTML:{__html:n.new_balance.replace("{balance}","<span>".concat(_,"</span>"))}}):null,React.createElement(P,{className:"make-adjustment-btn",type:"primary",size:"large",loading:c,onClick:R},n.make_adjustment)):null},Al=e=>({actions:$({adjustCustomerStoreCredits:bl,setStoreCreditsCustomerBalance:wl},e)}),Ol=I(null,Al)(vl),Nl=e=>{var w,A,O,T,y,C;const{store_credits_page:{rest_url:t,labels:a,nonce:r}}=acfwAdminApp,{customer:n}=e,[s,c]=p.useState(!1),[o,m]=p.useState(!1),[i,u]=Y.useMessage(),E=()=>{c(!0)},_=()=>{let b="".concat(acfwAdminApp.admin_url,"admin-ajax.php?action=acfwp_store_credit_reminder_preview_email");return b+=n!=null&&n.first_name&&(n!=null&&n.last_name)?"&args[name]=".concat(n==null?void 0:n.first_name," ").concat(n==null?void 0:n.last_name):"",b+=n!=null&&n.email?"&args[email]=".concat(n==null?void 0:n.email):"",b+=n!=null&&n.id?"&args[user_id]=".concat(n==null?void 0:n.id):"",b+="&_wpnonce=".concat(r==null?void 0:r.preview),b},g=()=>{c(!1)},R=()=>{c(!1),window.open(_())},h=()=>{m(!0);const b=()=>{m(!1),c(!1)};jQuery.ajax({type:"GET",url:t,data:{user_id:n==null?void 0:n.id},success:function(k){var G,d,f,S;!k.status||k.status==="error"?i.open({type:"error",content:"".concat((d=(G=a==null?void 0:a.modal)==null?void 0:G.error)==null?void 0:d.heading,": ").concat(k==null?void 0:k.message)}):i.open({type:"success",content:React.createElement(React.Fragment,null,(S=(f=a==null?void 0:a.modal)==null?void 0:f.success)==null?void 0:S.text,n!=null&&n.email?" <".concat(n==null?void 0:n.email,">."):"")}),b()},error:function(k,G,d){var f,S,D;(f=k==null?void 0:k.responseJSON)!=null&&f.message&&(d=k.responseJSON.message),i.open({type:"error",content:"".concat((D=(S=a==null?void 0:a.modal)==null?void 0:S.error)==null?void 0:D.heading,": ").concat(d)}),b()}})};return a!=null&&a.remind?React.createElement(React.Fragment,null,u,React.createElement(P,{onClick:E},a.remind),React.createElement(Ee,{title:(w=a==null?void 0:a.modal)==null?void 0:w.heading,className:"acfw-modal send-a-reminder-modal",width:500,open:s,onCancel:g,footer:[React.createElement(P,{key:"preview",className:"action-preview",onClick:R,"data-url":_()},(O=(A=a==null?void 0:a.modal)==null?void 0:A.button)==null?void 0:O.preview),React.createElement(P,{key:"send",className:"action-send",type:"primary",onClick:h,disabled:o},o?"".concat(a==null?void 0:a.loading,"..."):(y=(T=a==null?void 0:a.modal)==null?void 0:T.button)==null?void 0:y.send)]},React.createElement("p",null,(C=a==null?void 0:a.modal)==null?void 0:C.text),React.createElement("p",null,n==null?void 0:n.first_name," ",n==null?void 0:n.last_name,n!=null&&n.email?" <".concat(n==null?void 0:n.email,">"):""))):null};const{readStoreCreditsCustomers:Pl,adjustCustomerStoreCredits:Dl}=_e,Il=e=>{var b;const{customers:t,actions:a}=e,{store_credits_page:{labels:r}}=acfwAdminApp,{params:n,dispatchParams:s}=p.useContext(ma),[c,o]=p.useState(!1),[m,i]=p.useState(0),[u,E]=p.useState(n.search),[_,g]=p.useState(null),[R,h]=p.useState(null),[w,A]=p.useState(null),O=[{title:r.customer_name,dataIndex:"first_name",key:"first_name",sorter:!0,render:(k,G)=>"".concat(G.first_name," ").concat(G.last_name)},{title:r.email,dataIndex:"email",key:"email",sorter:!0},{title:r.balance,dataIndex:"balance",key:"balance",sorter:!0},{title:"",dataIndex:"id",key:"id",render:(k,G)=>React.createElement(React.Fragment,null,React.createElement(P,{onClick:()=>h(G)},r.view_stats),React.createElement(P,{onClick:()=>A(G)},r.adjust),React.createElement(Nl,{customer:G}))}],T=k=>{E(k),_&&(Pe("customer_search"),clearTimeout(_)),g(setTimeout(()=>s({type:"SET_SEARCH",value:k}),1e3))},y=k=>{s({type:"SET_PAGE",value:k})},C=(k,G,d)=>{if(d.columnKey){switch(d.columnKey){case"first_name":s({type:"SET_META_KEY",value:"billing_first_name"}),s({type:"SET_SORT_BY",value:"meta_value"});break;case"balance":s({type:"SET_META_KEY",value:"acfw_store_credit_balance"}),s({type:"SET_SORT_BY",value:"meta_value_num"});break;default:s({type:"SET_SORT_BY",value:d.columnKey});break}s({type:"SET_SORT_ORDER",value:d.order==="descend"?"desc":"asc"})}};return p.useEffect(()=>{o(!0),a.readCustomers({params:n,successCB:k=>{i(k.headers["x-total"]),o(!1)}})},[n]),React.createElement(React.Fragment,null,React.createElement(V,{title:r.customers_list},React.createElement("div",{className:"customer-search"},React.createElement("label",null,r.search_label),React.createElement(K.Search,{allowClear:!0,value:u,onChange:k=>T(k.target.value)})),React.createElement(le,{className:"customers-list-table",loading:c,pagination:!1,dataSource:t,columns:O,onChange:C}),0<m&&React.createElement(ve,{className:"customers-list-pagination",defaultCurrent:n.page,current:n.page,hideOnSinglePage:!0,disabled:c,total:m,pageSize:(b=n.per_page)!=null?b:10,showSizeChanger:!1,onChange:y})),React.createElement(Rl,{customer:R,setCustomer:h}),React.createElement(Ee,{width:500,visible:!window.lodash.isNull(w),footer:!1,onCancel:()=>A(null),onOk:()=>A(null)},React.createElement(Ol,{customer:w,setAdjustCustomer:A})))},$l=e=>({customers:e.storeCreditsCustomers}),kl=e=>({actions:$({readCustomers:Pl,adjustCustomerStoreCredits:Dl},e)}),Ml=I($l,kl)(Il),xl=e=>{const{slug:t}=e,{img_path:a}=acfwAdminApp.uncanny_automator;let r,n="";switch(t){case"woocommerce":r="woo-logo.png",n="WooCommerce";break;case"twilio":r="twilio-logo.png",n="Twilio";break;case"google_sheets":r="gsheets-logo.png",n="Google Sheets";break;default:r="Advanced-Coupons-Icon-WC-Marketing.png",n="Advanced Coupon";break}return React.createElement("div",{className:"icon-text ".concat(t)},React.createElement("img",{src:"".concat(a).concat(r)}),React.createElement("span",null,n))},pa=e=>{const{pluginSlug:t,className:a,type:r,size:n,text:s,successMessage:c,nonce:o,afterInstall:m}=e,[i,u]=p.useState(!1),E=()=>{u(!0),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"acfw_install_activate_plugin",plugin_slug:t,nonce:o}}).done(_=>{u(!1),_!=null&&_.success&&!_.success?Y.error(_.data):(typeof m=="function"&&m(),Y.success(c))}).fail(_=>{Y.error(_.responseJSON.data)})};return React.createElement(P,{className:a,type:r,size:n,loading:i,onClick:E},s)};const Ll=()=>{const{logo:e,main_content:t,action_text:a,action_url:r,is_plugin_active:n,nonce:s,labels:c,triggers_actions:o,sample_automations:m}=acfwAdminApp.uncanny_automator,[i,u]=p.useState(!!n);return React.createElement("div",{className:"store-credit-automations"},React.createElement("div",{className:"store-credit-automations__inner"},React.createElement("div",{className:"store-credit-automations__header"},React.createElement("img",{src:e}),React.createElement("p",{dangerouslySetInnerHTML:{__html:t}}),i?React.createElement(P,{className:"main-cta-btn",type:"primary",size:"large",href:r,icon:React.createElement(Ga,null)},c.add_new_recipe):React.createElement(pa,{pluginSlug:"uncanny-automator",className:"main-cta-btn",type:"primary",size:"large",text:a,nonce:s,successMessage:c.success_message,afterInstall:()=>u(!0)})),React.createElement("div",{className:"triggers-actions"},React.createElement(H,{gutter:16},o.map((E,_)=>React.createElement(N,{key:_,span:12},React.createElement(V,null,React.createElement("span",{className:"trigger-action__type"},E.type," ",E.is_pro&&React.createElement(Je,{color:"#1393A6"},c.pro)),React.createElement("span",{className:"trigger-action__desc"},E.desc)))))),React.createElement(ae,null),React.createElement("div",{className:"sample-automations"},React.createElement("p",null,c.sample_automations),React.createElement(H,{gutter:16},m.map((E,_)=>React.createElement(N,{key:_,span:8},React.createElement(V,{bordered:!1},React.createElement("h3",null,E.title),React.createElement("p",null,c.requires),React.createElement("ul",null,E.requires.map((g,R)=>React.createElement("li",{key:R},React.createElement(xl,{slug:g})))))))))))};const Bl=e=>{const{tabKey:t}=e;switch(t){case"dashboard":return React.createElement(ul,null);case"customers":return React.createElement(ml,null,React.createElement(Ml,null));case"automations":return React.createElement(Ll,null)}return null},Ul=()=>{var c;const{store_credits_page:{title:e,tabs:t}}=acfwAdminApp,a=Q(),n=(c=new URLSearchParams(oe().search).get("tab"))!=null?c:"dashboard",s=o=>{a.push("".concat(Z(),"admin.php?page=acfw-store-credits&tab=").concat(o))};return React.createElement("div",{className:"store-credits-page"},React.createElement(se,{title:e,className:"store-credits-header"}),React.createElement(ce,{defaultActiveKey:n,onTabClick:s},t.map(o=>React.createElement(ce.TabPane,{tab:o.label,key:o.key},React.createElement(Bl,{tabKey:o.key})))))};const bt=e=>{const{section:t}=e;switch(t){case"modules_section":return React.createElement(dn,null);case"general_section":return React.createElement(Jt,null);case"checkout_section":return React.createElement(un,null);case"bogo_deals_section":return React.createElement(ln,null);case"scheduler_section":return React.createElement(on,null);case"role_restrictions_section":return React.createElement(cn,null);case"url_coupons_section":return React.createElement(sn,null);case"store_credits_section":return React.createElement(rn,null);case"advanced_section":return React.createElement(Qt,null);case"help_page":return React.createElement(nn,null);case"license_page":return React.createElement(Xt,null);case"premium_upgrade":return React.createElement(an,null);case"loyalty_program_section":case"loyalty_program":return React.createElement(tn,null);case"advanced_gift_cards":return React.createElement(en,null)}return null},{setStorePage:jl}=ie,wt=Z(),Fl=e=>{const{sections:t,currentSection:a,actions:r}=e,{app_pages:n}=acfwAdminApp,s=a||"general_section",c=Q();if(t.length<1)return l.createElement("div",{className:"settings-nav-skeleton"},l.createElement(z,{active:!0,paragraph:!1}),l.createElement(z,{active:!0,paragraph:!1}),l.createElement(z,{active:!0,paragraph:!1}),l.createElement(z,{active:!0,paragraph:!1}),l.createElement(z,{active:!0,paragraph:!1}));const o=u=>{c.push("".concat(wt,"admin.php?page=").concat(u)),r.setStorePage({data:u})},m=t.filter(({show:u})=>u),i=["acfw-settings","acfw-about","acfw-store-credits"];return l.createElement(ke,{className:"acfw-settings-nav",defaultSelectedKeys:[s]},m.map(({id:u,title:E})=>l.createElement(ke.Item,{key:u},l.createElement(kt,{to:"".concat(wt,"admin.php?page=acfw-settings&section=").concat(u)},l.createElement(bt,{section:u}),E))),n.filter(({slug:u})=>!i.includes(u)).map(({slug:u,label:E,page:_})=>l.createElement(ke.Item,{key:_,className:_},l.createElement("button",{className:"buttonlink",onClick:()=>o(u)},l.createElement(bt,{section:_}),E))))},Gl=e=>({sections:e.sections}),Hl=e=>({actions:$({setStorePage:jl},e)}),Vl=I(Gl,Hl)(Fl),Yl=e=>{const{classname:t,title:a,description:r,button_text:n,image:s,nonce:c,success_message:o}=e.noticeData;return React.createElement("p",{className:"acfw-dyk-notice acfw-funnelkit-upsell-notice ".concat(t)},!!s&&React.createElement("img",{src:s}),React.createElement("span",{className:"title"},a),React.createElement("br",null),React.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:r}}),React.createElement("span",{className:"button-wrap"},React.createElement(pa,{pluginSlug:"funnel-builder",className:"install-funnelkit-btn",type:"primary",size:"middle",text:n,nonce:c,successMessage:o,afterInstall:()=>window.location.href="".concat(acfwAdminApp.admin_url,"admin.php?page=bwf")})))};const fa=p.createContext({showModal:!1,setShowModal:e=>{}}),ql=e=>{const{data:{title:t,content:a,buttonTxt:r},showModal:n,setShowModal:s}=e,c=Q(),o=Z(),m=()=>{c.push("".concat(o,"admin.php?page=acfw-premium"))};return l.createElement(Ee,{className:"acfw-upsell-modal",centered:!0,width:600,visible:n,onCancel:()=>s(!1),footer:null},l.createElement(mn,null),l.createElement("h2",null,t),a.map(i=>l.createElement("p",null,i)),l.createElement(P,{type:"primary",onClick:m},r))},zl=e=>{const{children:t}=e,[a,r]=p.useState(!1);return l.createElement(fa.Provider,{value:{showModal:a,setShowModal:r}},t,acfwAdminApp!=null&&acfwAdminApp.upsellModal?l.createElement(ql,{data:acfwAdminApp==null?void 0:acfwAdminApp.upsellModal,showModal:a,setShowModal:r}):null)},Kl=e=>{const{id:t}=e.field,a=p.useContext(fa);return l.createElement(Kt,{key:t,checked:!1,defaultChecked:!1,onChange:()=>a.setShowModal(!0)})},{updateSetting:Wl,setStoreSettingItem:Ql}=X,{action_notices:vt}=acfwAdminApp,Jl=e=>{const{field:t,setShowSpinner:a,validateInput:r,value:n,actions:s,order:c}=e,{id:o,title:m,type:i,placeholder:u,default:E,suffix:_,format:g,min:R,max:h}=t,[w,A]=p.useState(null),O=n!==void 0&&n!==!1?n:E,T=(y,C=!1)=>{const b=()=>{r(y)&&(s.setStoreSettingItem({data:{id:o,value:y}}),s.updateSetting({data:{id:o,value:y,type:i},processingCB:()=>a(!0),successCB:()=>{Y.success(l.createElement(l.Fragment,null,l.createElement("strong",null,t.title)," ",vt.success)),a(!1)},failCB:()=>{Y.error(l.createElement(l.Fragment,null,l.createElement("strong",null,t.title)," ",vt.fail)),a(!1)}}))};C?(w&&(clearTimeout(w),A(null)),A(setTimeout(b,1e3))):b()};if(i==="checkbox"||i==="module")return l.createElement(Kt,{key:o,checked:O==="yes",defaultChecked:O==="yes",onChange:y=>T(y?"yes":"")});if(i==="premiummodule")return l.createElement(Kl,{field:t});if(i==="textarea")return l.createElement(K.TextArea,{key:o,rows:3,placeholder:u,defaultValue:O,onChange:y=>T(y.target.value,!0)});if(i==="radio"){const{options:y}=t;return l.createElement(ut.Group,{onChange:C=>T(C.target.value),value:O},l.createElement(ye,{direction:"vertical"},(y==null?void 0:y.length)&&y.map(({key:C,label:b})=>l.createElement(ut,{key:C.toString(),value:C.toString()},b))))}if(i==="select"){let{options:y}=t,C=y||[];return C=C.map(b=>b.label.label?b.label:{value:b.key,label:b.label}),l.createElement(W,{key:o,defaultValue:O.toString(),style:{width:"50%"},placeholder:u,options:C,onSelect:b=>T(b)})}if(i==="timepicker"){let y=g||"HH:mm:ss",C=O||t.default;return C=C||"00:00:00",C=window.moment(C,y),l.createElement(Ha,{key:o,defaultValue:C,format:y,onChange:b=>T(b.format("HH:mm:ss"))})}if(["text","url","permalink","customurl"].indexOf(i)>-1){let y=["permalink","customurl"];return l.createElement(K,{key:o,type:y.indexOf(i)>-1?"text":i,name:o,placeholder:u,defaultValue:O,onChange:C=>T(C.target.value,!0),suffix:_})}if(i==="number")return console.log(R,h),l.createElement(Xe,{key:o,name:o,placeholder:u,defaultValue:O,onChange:y=>T(y,!0),min:R!=null?R:void 0,max:h!=null?h:void 0});if(i==="price")return l.createElement(K,{type:"text",className:"wc_input_price",name:o,placeholder:u,defaultValue:O,onChange:y=>T(y.target.value,!0)});if(i==="acfwflicense"){const{licenseContent:y}=t;return l.createElement("div",{className:"acfw-license-field"},y==null?void 0:y.map(C=>l.createElement("p",{dangerouslySetInnerHTML:{__html:C}})))}return i==="subtitle"?l.createElement("div",{className:"form-heading ".concat(c>0?"spacer":"")},l.createElement("h3",null,m)):null},Xl=(e,t)=>{const{id:a}=t.field,r=e.settingValues.findIndex(s=>s.id===a);return{value:r>-1?e.settingValues[r].value:""}},Zl=e=>({actions:$({updateSetting:Wl,setStoreSettingItem:Ql},e)}),At=I(Xl,Zl)(Jl),{Text:Ot}=Wt,ei=e=>{const{field:t}=e,{id:a,title:r,type:n,desc:s,desc_tip:c}=t,{validation:o}=acfwAdminApp,[m,i]=p.useState(!1),[u,E]=p.useState(!1),_=c?l.createElement("div",{className:"setting-tooltip-content"},c):null;if(n==="title")return l.createElement("div",{className:"form-heading"},l.createElement("h1",null,r),l.createElement("p",null,s));if(n==="notice"&&(t!=null&&t.noticeData)){const{classname:w,title:A,description:O,button_text:T,button_link:y,button_class:C,image:b}=t==null?void 0:t.noticeData;return l.createElement("p",{className:"acfw-dyk-notice ".concat(w)},!!b&&l.createElement("img",{src:b}),l.createElement("span",{className:"title"},A),l.createElement("br",null),l.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:O}}),T&&y?l.createElement("a",{className:"acfw-button ".concat(C),href:y,rel:"noreferrer noopener",target:"_blank"},T):null)}if(n==="funnelkit_upsell"&&(t!=null&&t.noticeData))return l.createElement(Yl,{noticeData:t==null?void 0:t.noticeData});if(n==="sectionend")return null;const g=w=>w&&n==="url"&&!ua(w+"")?(E(!0),!1):(E(!1),!0),R=()=>l.createElement(l.Fragment,null,l.createElement(N,{span:8,className:"setting-title-column"},l.createElement("label",null,l.createElement("strong",null,r),n==="premiummodule"?l.createElement(l.Fragment,null,l.createElement("br",null),l.createElement(Je,{className:"premium-tag"},"Premium")):null),c?l.createElement(Ke,{placement:"right",content:_,trigger:"click"},l.createElement(Qe,{className:"setting-tooltip-icon"})):null),l.createElement(N,{className:"setting-field-column",span:16},l.createElement(At,{field:t,setShowSpinner:i,validateInput:g}),m?l.createElement(pe,{indicator:l.createElement(dt,{style:{fontSize:24},spin:!0})}):null,l.createElement("div",{className:"invalid-input".concat(u?" show":"")},u?l.createElement(Ot,{type:"danger"},o[n]?o[n]:o.default):null),s?l.createElement("p",{dangerouslySetInnerHTML:{__html:s}}):null)),h=()=>l.createElement(l.Fragment,null,l.createElement(N,{className:"setting-field-column"},l.createElement(At,{field:t,setShowSpinner:i,validateInput:g}),m?l.createElement(pe,{indicator:l.createElement(dt,{style:{fontSize:24},spin:!0})}):null,l.createElement("div",{className:"invalid-input".concat(u?" show":"")},u?l.createElement(Ot,{type:"danger"},o[n]?o[n]:o.default):null),s?l.createElement("p",{dangerouslySetInnerHTML:{__html:s}}):null));return l.createElement(H,{gutter:16,className:"form-control",id:"".concat(a,"_field"),key:a},l.createElement(ae,null),n==="subtitle"?l.createElement(h,null):l.createElement(R,null))};const rt=e=>{var f,S;const{className:t,showSubtitle:a,showTag:r}=e,{free_guide:{show:n,tag:s,title:c,subtitle:o,content:m,image:i,button:u,list:E,field_values:_,placeholders:g,form_nonce:R,missing_form_fields:h,failed_form_error:w}}=acfwAdminApp,[A,O]=p.useState((f=_.name)!=null?f:""),[T,y]=p.useState((S=_.email)!=null?S:""),[C,b]=p.useState(!1),[k,G]=p.useState(n),d=async D=>{if(D.preventDefault(),!A||!T){Y.error(h);return}b(!0);const j=new Date,v=new FormData;v.append("action","acfwf_get_free_training_guide"),v.append("name",A),v.append("email",T),v.append("title",document.title),v.append("url",window.location.href),v.append("referrer",document.referrer),v.append("timestamp",j.getTime().toString()),v.append("nonce",R);try{const ee=await(await fetch(ajaxurl,{method:"post",body:v})).json();ee.status==="success"?(Y.success(ee.message),acfwAdminApp.free_guide.show=!1,G(!1)):Y.error(ee.error_msg)}catch(ue){Y.error(w)}b(!1)};return k?l.createElement("div",{className:"coupons-free-guide ".concat(t)},l.createElement("div",{className:"inner"},l.createElement("form",{onSubmit:d},r?l.createElement(Je,{color:"#1693A7"},s):null,l.createElement("h2",null,c),l.createElement("img",{src:i,alt:c}),a?l.createElement("h3",null,o):null,l.createElement("p",{dangerouslySetInnerHTML:{__html:m}}),l.createElement("ul",null,E.map((D,j)=>l.createElement("li",{key:j},l.createElement(pn,null),D))),l.createElement("p",{className:"form-fields"},l.createElement(K,{value:A,onChange:D=>O(D.target.value),placeholder:g.name}),l.createElement(K,{value:T,type:"email",onChange:D=>y(D.target.value),placeholder:g.email})),l.createElement("p",{className:"form-actions"},l.createElement(P,{type:"link",htmlType:"submit",className:"cta",size:"large",loading:C},u.text))))):null};rt.defaultProps={className:"",showSubtitle:!1,showTag:!0};const ti=e=>{const{sections:t,settingValues:a,currentSection:r}=e,n=r?t.findIndex(o=>o.id===r):0,s=t.length?t[n].id:"",c=t.length?t[n].fields:[];return c.length<1||a.length<1?l.createElement(l.Fragment,null,l.createElement(z,{loading:!0,active:!0,paragraph:{rows:1}}),l.createElement(ae,null),l.createElement(z,{loading:!0,active:!0,paragraph:{rows:2},title:!1}),l.createElement(ae,null),l.createElement(z,{loading:!0,active:!0,paragraph:{rows:2},title:!1}),l.createElement(ae,null),l.createElement(z,{loading:!0,active:!0,paragraph:{rows:2},title:!1})):l.createElement(zl,null,l.createElement("div",{className:"settings-form ".concat(s,"-form")},c.map(o=>l.createElement(ei,{key:o.id,field:o})),!r||r==="general_section"?l.createElement(l.Fragment,null,l.createElement(ae,null),l.createElement(rt,null)):null))},ai=e=>({sections:e.sections,settingValues:e.settingValues}),ni=e=>({actions:$({},e)}),ri=I(ai,ni)(ti),{readSections:si,readSection:ci}=Oe,oi=e=>{const{sections:t,actions:a}=e,n=new URLSearchParams(oe().search).get("section");return p.useEffect(()=>{t.length>0||a.readSections({id:n})},[a]),p.useEffect(()=>{if(t.length<1)return;const s=n?t.findIndex(c=>c.id===n):0;t[s].fields.length<1&&a.readSection({id:n})},[t,a,n]),l.createElement(l.Fragment,null,l.createElement(se,{title:acfwAdminApp.title,description:acfwAdminApp.desc,className:"settings-header"}),l.createElement(H,{className:"settings-content"},l.createElement(N,{span:6},l.createElement(Vl,{currentSection:n})),l.createElement(N,{span:18,className:"content-column"},l.createElement(ri,{currentSection:n}))))},li=e=>({sections:e.sections}),ii=e=>({actions:$({readSections:si,readSection:ci},e)}),ui=I(li,ii)(oi),{LicensePremium:di}=acfwpElements,mi=parseInt(acfwpElements.is_acfwp_active),pi=()=>{const{license_page:{title:e,desc:t,feature_comparison:a,license_status:r,content:n,specs:s}}=acfwAdminApp;return mi?l.createElement(di,null):l.createElement("div",{className:"acfw-license-box"},l.createElement("div",{className:"overview"},l.createElement("h1",null,e),l.createElement("p",null,t),l.createElement("a",{className:"action-button feature-comparison",href:a.link,target:"_blank",rel:"noopener noreferrer"},a.text)),l.createElement("div",{className:"license-info"},l.createElement("div",{className:"heading"},l.createElement("div",{className:"left"},l.createElement("span",null,r.label)),l.createElement("div",{className:"right"},l.createElement("a",{className:"action-button upgrade-premium",href:r.link,target:"_blank",rel:"noopener noreferrer"},r.text))),l.createElement("div",{className:"content"},l.createElement("h2",null,n.title),l.createElement("p",null,n.text),l.createElement("table",{className:"license-specs"},l.createElement("thead",null,l.createElement("tr",null,s.map(c=>l.createElement("th",{key:c.label},c.label)))),l.createElement("tbody",null,l.createElement("tr",null,s.map(c=>l.createElement("td",{key:c.value},c.value))))))))};const{setStorePage:fi}=ie,Ei=e=>{var i;const{actions:t}=e,a=Q(),n=(i=new URLSearchParams(oe().search).get("tab"))!=null?i:"ACFW",[s,c]=l.useState(n),{license_tabs:o}=acfwAdminApp,m=u=>{a.push("".concat(Z(),"admin.php?page=acfw-license&tab=").concat(u)),c(u),t.setStorePage({data:"acfw-license/".concat(u)})};return p.useEffect(()=>{n!=="ACFW"&&t.setStorePage({data:"acfw-license/".concat(n)})},[]),l.createElement("div",{className:"license-page"},l.createElement(se,{className:"license-header",hideUpgrade:!0}),l.createElement(ce,{defaultActiveKey:n,items:o,onTabClick:m}),s==="ACFW"&&l.createElement(pi,null))},_i=e=>({actions:$({setStorePage:fi},e)}),gi=I(null,_i)(Ei);const hi=()=>{const{about_page:{title:e,desc:t,main_card:a,cards:r,status:n,status_texts:s,button_texts:c}}=acfwAdminApp;return l.createElement("div",{className:"about-page"},l.createElement(se,{title:e,description:t,className:"about-header",hideUpgrade:!0}),l.createElement(H,{className:"about-rymera-team"},l.createElement(N,{className:"content",span:12},l.createElement("div",{className:"inner"},l.createElement("h2",null,a.title),a.content.map((o,m)=>l.createElement("p",{key:m},o)))),l.createElement(N,{className:"photo",span:12},l.createElement("img",{src:a.image,alt:"Rymera Team"}))),l.createElement(H,{className:"plugin-cards",gutter:10},r.map((o,m)=>l.createElement(N,{key:m,span:12},l.createElement(V,{actions:[l.createElement(l.Fragment,null,l.createElement("strong",null,n,": "),l.createElement("span",null,s[o.action.status])),o.action.link?l.createElement(P,{type:"primary",href:o.action.link,target:o.action.external?"_blank":void 0},c[o.action.status]):null]},l.createElement(V.Meta,{avatar:l.createElement(Va,{src:o.icon}),title:o.title,description:o.content}))))))};const{Text:ne,Link:Nt}=Wt,yi=()=>{const{premium_page:{image:e,title:t,desc:a,header:r,rows:n,action:s},logo_alt:c}=acfwAdminApp;return React.createElement("div",{id:"acfw-premium",className:"acfwf-upgrade-settings-block"},React.createElement("p",null,React.createElement("a",{href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=logo",target:"_blank",rel:"noreferrer"},React.createElement("img",{className:"logo",src:e,alt:c}))),React.createElement("h2",{dangerouslySetInnerHTML:{__html:t}}),React.createElement("p",null,React.createElement(Nt,{className:"acfw-upgrade-button",href:s.btn_link,target:"_blank"},s.btn_text)),React.createElement("p",null,React.createElement(ne,null,a)),React.createElement("div",{className:"responsive-table"},React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"feature"},React.createElement(ne,null,r.feature)),React.createElement("th",{className:"free"},React.createElement(ne,null,r.free)),React.createElement("th",{className:"premium"},React.createElement(ne,null,r.premium)))),React.createElement("tbody",null,n.map(({feature:o,free:m,premium:i},u)=>React.createElement("tr",{key:u},React.createElement("td",{className:"feature"},React.createElement(ne,null,o)),React.createElement("td",{className:"free dashicons-before dashicons-no"},React.createElement(ne,null,m)),React.createElement("td",{className:"premium dashicons-before dashicons-yes-alt"},React.createElement(ne,null,i))))))),React.createElement("div",{className:"cta-block"},React.createElement("h3",null,React.createElement(ne,null,s.title)),React.createElement("p",null,React.createElement(Nt,{className:"acfw-upgrade-button",href:s.btn_link,target:"_blank"},s.btn_text))))};const Ri=()=>{const{help_page:{title:e,desc:t,cards:a}}=acfwAdminApp,{HelpPremium:r}=acfwpElements;return l.createElement("div",{className:"help-page"},l.createElement(se,{title:e,description:t,className:"help-header"}),l.createElement(H,{gutter:10},a.map((n,s)=>l.createElement(N,{key:s,className:"acfw-border-box",span:12},l.createElement(V,null,l.createElement("h2",null,n.title),l.createElement("p",null,n.content),l.createElement(P,{type:"primary",href:n.action.link,size:"large",target:"_blank"},n.action.text))))),l.createElement(H,{gutter:10},l.createElement(N,{className:"acfw-border-box",span:24},l.createElement(rt,{className:"help-guide",showSubtitle:!0,showTag:!1}))),r?l.createElement(r,null):null)};const Si=e=>{const{step_count:t,title:a,description:r,is_active:n,action_text:s,link:c,is_external:o}=e;return React.createElement("div",{className:"plugin-step ".concat(n?"":"blocked")},React.createElement("div",{className:"step-count"},React.createElement("span",null,t)),React.createElement("div",{className:"inner-content"},React.createElement("p",{className:"title"},a),React.createElement("p",{className:"description"},r),React.createElement("p",{className:"actions"},React.createElement(P,{href:c,target:o?"_blank":""},s))))},Ti=()=>{const{loyalty_program:{title:e,description:t,plugin_image:a,features_list:r,steps_list:n}}=acfwAdminApp;return React.createElement("div",{className:"loyalty-program-page-upsell"},React.createElement(se,{title:e,className:"loyalty-program-header",description:t,hideUpgrade:!0}),React.createElement(H,{className:"features-list",gutter:60},React.createElement(N,{span:12,className:"image"},React.createElement("img",{src:a.src,alt:a.alt})),React.createElement(N,{span:12,className:"content"},React.createElement("ul",null,r.map((s,c)=>React.createElement("li",{key:c},s))))),React.createElement("div",{className:"action-steps"},n.map((s,c)=>React.createElement(Si,{key:c,...s}))))};const Ci=e=>{const{step_count:t,title:a,description:r,is_active:n,action_text:s,link:c,is_external:o}=e;return React.createElement("div",{className:"plugin-step ".concat(n?"":"blocked")},React.createElement("div",{className:"step-count"},React.createElement("span",null,t)),React.createElement("div",{className:"inner-content"},React.createElement("p",{className:"title"},a),React.createElement("p",{className:"description"},r),React.createElement("p",{className:"actions"},React.createElement(P,{href:c,target:o?"_blank":""},s))))},bi=()=>{const{advanced_gift_cards:{title:e,description:t,plugin_image:a,features_list:r,steps_list:n}}=acfwAdminApp;return React.createElement("div",{className:"advanced-gift-cards-page-upsell"},React.createElement("div",{className:"page-header advanced-gift-cards-header"},React.createElement(nt,{hideUpgrade:!0}),React.createElement("h1",null,e),React.createElement("p",null,t)),React.createElement(H,{className:"features-list",gutter:60},React.createElement(N,{span:12,className:"image"},React.createElement("img",{src:a.src,alt:a.alt})),React.createElement(N,{span:12,className:"content"},React.createElement("ul",null,r.map((s,c)=>React.createElement("li",{key:c},s))))),React.createElement("div",{className:"action-steps"},n.map((s,c)=>React.createElement(Ci,{key:c,...s}))))},st=e=>{const{className:t}=e,a={rows:2,width:100};return React.createElement("div",{className:"coupon-templates-list ".concat(t)},[...Array(9)].map((r,n)=>React.createElement("div",{key:n,className:"coupon-template-card"},React.createElement("div",{className:"template-image"}),React.createElement("div",{className:"template-content"},React.createElement(z,{active:!0,paragraph:a})))))},{togglePremiumModal:wi,deleteRecentCouponTemplate:vi,unsetRecentCouponTemplate:Ai}=q,Oi=e=>{const{labels:t}=acfwAdminApp.coupon_templates_page,a=Q(),{template:r,isReview:n,showClose:s,actions:c}=e,o=()=>{if(r.license_type==="premium"&&!parseInt(acfwpElements.is_acfwp_active)){c.togglePremiumModal({show:!0});return}const i=n?"id=".concat(r.id,"&is_review=true"):"id=".concat(r.id);a.push("".concat(Z(),"admin.php?page=acfw-coupon-templates&").concat(i))},m=()=>{c.deleteRecentCouponTemplate({id:r.id}),c.unsetRecentCouponTemplate({id:r.id})};return React.createElement("div",{className:"coupon-template-card"},React.createElement("div",{className:"template-image",style:{backgroundColor:r.image_bg_color}},s&&React.createElement("span",{className:"close-icon",onClick:m},React.createElement(zt,null)),React.createElement("span",{className:"image-svg",onClick:o,dangerouslySetInnerHTML:{__html:r.image_svg}}),r.license_type==="premium"&&React.createElement("span",{className:"premium-badge"},t.premium)),React.createElement("div",{className:"template-content"},React.createElement("h3",{onClick:o},r.title),React.createElement("p",null,r.description)))},Ni=e=>({actions:$({togglePremiumModal:wi,deleteRecentCouponTemplate:vi,unsetRecentCouponTemplate:Ai},e)}),Pi=I(null,Ni)(Oi),ct=e=>{const{templates:t,isReview:a,showClose:r}=e,{labels:n}=acfwAdminApp.coupon_templates_page,[s,c]=p.useState(1),o=9,m=p.useMemo(()=>t.slice((s-1)*o,s*o),[t,s]);return p.useEffect(()=>{c(1)},[t]),t.length?React.createElement(React.Fragment,null,React.createElement("div",{className:"queried-templates-list coupon-templates-list"},m.map(i=>React.createElement(Pi,{key:i.id,template:i,isReview:a,showClose:r}))),React.createElement("div",{className:"templates-list-pagination"},React.createElement(ve,{defaultCurrent:1,pageSize:o,current:s,total:t.length,onChange:i=>c(i),hideOnSinglePage:!0}))):React.createElement("div",{className:"no-templates-message"},n.no_templates_found)},Di=e=>{const{templates:t,actions:a}=e,[r,n]=p.useState(!1);return p.useEffect(()=>{n(!0),a.readRecentCouponTemplates({successCB:()=>n(!1)})},[]),r?React.createElement(st,{className:"coupon-templates-list"}):React.createElement(ct,{templates:t,showClose:!0})},Ii=e=>{var t,a;return{templates:(a=(t=e.couponTemplates)==null?void 0:t.recent)!=null?a:[]}},$i=e=>({actions:$({...q},e)}),ki=I(Ii,$i)(Di),Mi=e=>{const{templates:t,loading:a,actions:r}=e;return p.useEffect(()=>{r.setCouponTemplatesLoading({loading:!0}),r.readCouponTemplates({successCB:()=>r.setCouponTemplatesLoading({loading:!1})})},[]),a?React.createElement(st,{className:"queried-templates-list"}):React.createElement(ct,{templates:t})},xi=e=>{var t,a,r,n;return{templates:(a=(t=e.couponTemplates)==null?void 0:t.templates)!=null?a:[],loading:(n=(r=e.couponTemplates)==null?void 0:r.loading)!=null?n:!1}},Li=e=>({actions:$({...q},e)}),Bi=I(xi,Li)(Mi),Ui=e=>{const{templates:t,loading:a,actions:r}=e;return p.useEffect(()=>{r.setCouponTemplatesLoading({loading:!0}),r.readCouponTemplates({isReview:!0,successCB:()=>r.setCouponTemplatesLoading({loading:!1})})},[]),a?React.createElement(st,{className:"queried-templates-list"}):React.createElement(ct,{templates:t,isReview:!0})},ji=e=>{var t,a,r,n;return{templates:(a=(t=e.couponTemplates)==null?void 0:t.review)!=null?a:[],loading:(n=(r=e.couponTemplates)==null?void 0:r.loading)!=null?n:!1}},Fi=e=>({actions:$({...q},e)}),Gi=I(ji,Fi)(Ui),{readCouponTemplateCategories:Hi,readCouponTemplateCategory:Vi,setCouponTemplatesLoading:me,readCouponTemplates:Yi}=q,qi=e=>{const{categories:t,actions:a}=e,{labels:r}=acfwAdminApp.coupon_templates_page,[n,s]=p.useState(!1),[c,o]=p.useState("all"),m=i=>{if(i!==c){if(o(i),i==="all"){a.readCouponTemplates({processingCB:()=>me({loading:!0}),successCB:()=>me({loading:!1})});return}a.readCouponTemplateCategory({slug:i,processingCB:()=>me({loading:!0}),successCB:()=>me({loading:!1})})}};return p.useEffect(()=>{s(!0),a.readCouponTemplateCategories({successCB:()=>s(!1)})},[]),React.createElement("div",{className:"coupon-templates-sidebar"},React.createElement("div",{className:"sidebar-inner"},React.createElement("h3",null,r.categories),React.createElement("ul",{className:"categories-list"},n?React.createElement(pe,null):React.createElement(React.Fragment,null,React.createElement("li",{className:c==="all"?"current":"",onClick:()=>m("all")},React.createElement("span",null,r.all_templates)),t.map(i=>React.createElement("li",{className:c===i.slug?"current":"",key:i.slug,onClick:()=>m(i.slug)},React.createElement("span",null,i.name)))))))},zi=e=>{var t,a;return{categories:(a=(t=e.couponTemplates)==null?void 0:t.categories)!=null?a:[]}},Ki=e=>({actions:$({readCouponTemplateCategories:Hi,readCouponTemplateCategory:Vi,setCouponTemplatesLoading:me,readCouponTemplates:Yi},e)}),Wi=I(zi,Ki)(qi),Qi=e=>{const{defaultValue:t,onChange:a}=e,[r,n]=p.useState(t!=null?t:""),s=o=>{n(o.target.value),a(o.target.value)},c=()=>{const o="ABCDEFGHJKMNPQRSTUVWXYZ123456789";let i="";for(let u=0;u<10;u++)i+=o.charAt(Math.floor(Math.random()*o.length));n(i),a(i)};return React.createElement(ye,{direction:"horizontal",size:"middle"},React.createElement(ye.Compact,null,React.createElement(K,{allowClear:!0,value:r,onChange:s})),React.createElement(ye.Compact,null,React.createElement(P,{onClick:()=>c()},"Generate")))},Ji=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e;return React.createElement(Xe,{placeholder:r==null?void 0:r.placeholder,defaultValue:t,readOnly:!a,min:r==null?void 0:r.min,max:r==null?void 0:r.max,step:r==null?void 0:r.step,onChange:n})},Xi=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e;return React.createElement("div",null,React.createElement(K,{placeholder:r==null?void 0:r.placeholder,defaultValue:t,readOnly:!a,onChange:s=>n(s.target.value)}))},Zi=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e,{currency:s}=acfwAdminApp.store_credits_page;return React.createElement("div",null,React.createElement(Xe,{placeholder:r==null?void 0:r.placeholder,defaultValue:t,readOnly:!a,decimalSeparator:s.decimal_separator,parser:c=>Se(c!=null?c:"").toString(),onChange:n}))},eu=e=>{var c;const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e,s=Object.keys((c=r==null?void 0:r.options)!=null?c:{}).map(o=>({value:o,label:r!=null&&r.options?r==null?void 0:r.options[o]:""}));return React.createElement("div",null,React.createElement(W,{placeholder:r==null?void 0:r.placeholder,disabled:!a,defaultValue:t,options:s,onChange:n}))},tu=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e;return React.createElement("div",null,React.createElement(K.TextArea,{placeholder:r==null?void 0:r.placeholder,defaultValue:t,readOnly:!a,onChange:s=>n(s.target.value)}))},au=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e,[s,c]=p.useState(t==="yes");return React.createElement("div",null,React.createElement(Ya,{checked:s,disabled:!a,onChange:o=>{c(o.target.checked),n(o.target.checked?"yes":"no")}}),React.createElement("span",null,r.description))},nu=()=>{var s;const[e,t]=p.useState(!1),[a,r]=p.useState((s=acfwAdminApp.user_role_options)!=null?s:[]),n=async()=>{try{t(!0);const c=await x.get("coupons/v1/templates/options",{params:{type:"user_role"},cancelToken:J("fetch_user_roles")});c&&c.data&&(acfwAdminApp.user_role_options=c.data,r(c.data)),t(!1)}catch(c){console.log(c)}};return p.useEffect(()=>(acfwAdminApp.user_role_options||n(),()=>Pe("fetch_user_roles")),[]),{options:a,loading:e}},ru=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e,{options:s,loading:c}=nu();return React.createElement("div",null,React.createElement(W,{mode:"multiple",placeholder:r==null?void 0:r.placeholder,disabled:!a,defaultValue:t.length?t:void 0,options:s,loading:c,onChange:o=>n(o)}))},De=({fetchOptions:e,optionMapper:t,debounceTimeout:a=800,...r})=>{const[n,s]=p.useState(!1),[c,o]=p.useState([]),m=p.useRef(0),i=p.useMemo(()=>qa(E=>{m.current+=1;const _=m.current;o([]),s(!0),e(E).then(g=>{_===m.current&&(o(g),s(!1))})},a),[e,a]);return React.createElement(W,{labelInValue:!0,filterOption:!1,onSearch:i,notFoundContent:n?React.createElement(pe,{size:"small"}):null,...r,options:c})},su=e=>{const{fixtures:t,onChange:a}=e,[r,n]=p.useState([]),s=async o=>{const m=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_products_and_variations",term:o,security:acfwAdminApp.nonces.search_products,exclude:r.map(u=>u.value)}});return Object.keys(m).map(u=>({label:m[u],value:u}))},c=o=>{n(o),a(o)};return React.createElement(De,{mode:"multiple",placeholder:t==null?void 0:t.placeholder,fetchOptions:s,onChange:c,fixtures:t,style:{width:"100%"}})},cu=e=>{const{fixtures:t,onChange:a}=e,[r,n]=p.useState([]),s=async o=>{const m=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_taxonomy_terms",term:o,taxonomy:"product_cat",security:acfwAdminApp.nonces.search_taxonomy_terms,exclude:r.map(u=>u.value)}});return Object.keys(m).map(u=>({label:m[u].name,value:m[u].term_id}))},c=o=>{n(o),a(o)};return React.createElement(De,{mode:"multiple",placeholder:t==null?void 0:t.placeholder,fetchOptions:s,onChange:c,fixtures:t,style:{width:"100%"}})},ou=e=>{const{defaultValue:t,editable:a,onChange:r}=e,n=window.moment(t!=null?t:""),s=c=>{var o;r((o=c==null?void 0:c.format("YYYY-MM-DD HH:mm:ss"))!=null?o:"")};return React.createElement(We,{showTime:!0,defaultValue:n,disabled:!a,onChange:s})},lu=e=>{const{fixtures:t,onChange:a}=e,[r,n]=p.useState([]),s=async o=>{const m=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"acfw_search_coupons",term:o,security:acfwAdminApp.nonces.search_products,include:!0,exclude:r.map(u=>u.value)}});return Object.keys(m).map(u=>({label:m[u],value:u}))},c=o=>{n(o),a(o)};return React.createElement(De,{mode:"multiple",placeholder:t==null?void 0:t.placeholder,fetchOptions:s,onChange:c,fixtures:t,style:{width:"100%"},value:r})},iu=e=>{const{fixtures:t,onChange:a}=e,[r,n]=p.useState([]),s=async o=>{const m=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_customers",term:o,security:acfwAdminApp.nonces.search_customers,exclude:r.map(u=>u.value)}});return Object.keys(m).map(u=>({label:m[u].replace("&ndash;","–"),value:u}))},c=o=>{n(o),a(o)};return React.createElement(De,{mode:"multiple",placeholder:t==null?void 0:t.placeholder,fetchOptions:s,onChange:c,fixtures:t,style:{width:"100%"},value:r})},Pt={coupon_code:Qi,number:Ji,text:Xi,price:Zi,select:eu,textarea:tu,checkbox:au,user_roles:ru,products:su,product_categories:cu,date:ou,coupons:lu,customers:iu};function uu(e){return Pt[e]?Pt[e]:()=>l.createElement("div",null,"Field type not found")}const{setEditCouponTemplateFieldValue:du}=q,mu=e=>{const{templateField:t,actions:a}=e,{field:r,value:n,field_value:s,fixtures:c}=t,o="input-field-".concat(r),m=uu(c.type),i=u=>{a.setFieldValue({field:t.field,value:u})};return React.createElement("div",{className:"template-field"},React.createElement("div",{className:"template-field-inner"},React.createElement("label",{htmlFor:o},c.label),React.createElement("div",{className:"field-input-wrap"},React.createElement(m,{defaultValue:n,editable:s!=="readonly",fixtures:c,onChange:i}),c.tooltip&&React.createElement(Ke,{className:"acfw-field-tooltip",placement:"right",content:c.tooltip,trigger:"click"},React.createElement(Qe,null))),!!(t!=null&&t.error)&&React.createElement("div",{className:"field-error"},t.error)))},pu=e=>({actions:$({setFieldValue:du},e)}),fu=I(null,pu)(mu),Be=e=>{const{text:t,onClick:a,...r}=e,n=Q(),s=()=>{typeof a=="function"&&a(),n.goBack()};return React.createElement(P,{onClick:s,...r},t)},{validateEditCouponTemplateData:Eu,createCouponFromTemplate:_u,setCreatedCouponResponseData:gu}=q,hu=e=>{const{template:t,text:a,size:r,actions:n}=e,[s,c]=p.useState(!1),o=()=>{var u;n.validateEditCouponTemplateData();const m=(u=t==null?void 0:t.fields)==null?void 0:u.filter(E=>E.error);if(!t||m!=null&&m.length)return;const i={id:t.id,fields:t.fields.map(E=>({key:E.field,value:E.value,type:E.fixtures.type}))};c(!0),n.createCouponFromTemplate({data:i,successCB:E=>{c(!1),n.setCreatedCouponResponseData({data:E.data})}})};return React.createElement(P,{loading:s,type:"primary",onClick:o,size:r},a)},yu=e=>{var t,a,r,n;return{template:(a=(t=e.couponTemplates)==null?void 0:t.edit)!=null?a:null,formResponse:(n=(r=e.couponTemplates)==null?void 0:r.formResponse)!=null?n:null}},Ru=e=>({actions:$({validateEditCouponTemplateData:Eu,createCouponFromTemplate:_u,setCreatedCouponResponseData:gu},e)}),Su=I(yu,Ru)(hu);var Ie={};function Ue(e){"@babel/helpers - typeof";return Ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(e)}Object.defineProperty(Ie,"__esModule",{value:!0});Ie.CopyToClipboard=void 0;var he=Ea(p),Tu=Ea(za),Cu=["text","onCopy","options","children"];function Ea(e){return e&&e.__esModule?e:{default:e}}function Dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function It(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Dt(Object(a),!0).forEach(function(r){ot(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Dt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function bu(e,t){if(e==null)return{};var a=wu(e,t),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wu(e,t){if(e==null)return{};var a={},r=Object.keys(e),n,s;for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&(a[n]=e[n]);return a}function vu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Au(e,t,a){return t&&$t(e.prototype,t),a&&$t(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ou(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}function je(e,t){return je=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},je(e,t)}function Nu(e){var t=Du();return function(){var r=we(e),n;if(t){var s=we(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return Pu(this,n)}}function Pu(e,t){if(t&&(Ue(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _a(e)}function _a(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Du(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},we(e)}function ot(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ga=function(e){Ou(a,e);var t=Nu(a);function a(){var r;vu(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return r=t.call.apply(t,[this].concat(s)),ot(_a(r),"onClick",function(o){var m=r.props,i=m.text,u=m.onCopy,E=m.children,_=m.options,g=he.default.Children.only(E),R=(0,Tu.default)(i,_);u&&u(i,R),g&&g.props&&typeof g.props.onClick=="function"&&g.props.onClick(o)}),r}return Au(a,[{key:"render",value:function(){var n=this.props;n.text,n.onCopy,n.options;var s=n.children,c=bu(n,Cu),o=he.default.Children.only(s);return he.default.cloneElement(o,It(It({},c),{},{onClick:this.onClick}))}}]),a}(he.default.PureComponent);Ie.CopyToClipboard=ga;ot(ga,"defaultProps",{onCopy:void 0,options:void 0});var Iu=Ie,Fe=Iu.CopyToClipboard;Fe.CopyToClipboard=Fe;var $u=Fe;const ku=e=>{const{value:t,...a}=e;return React.createElement(K.Group,{className:"copy-input-field-component",compact:!0},React.createElement(K,{style:{width:"calc(100% - 46px)"},...a,value:t,readOnly:!0}),React.createElement($u.CopyToClipboard,{text:t,onCopy:()=>Y.success("Copy success")},React.createElement(P,null,React.createElement(Ka,null))))};const{clearCreatedCouponResponseData:Mu}=q,xu=e=>{const{formResponse:t,actions:a}=e,{labels:r}=acfwAdminApp.coupon_templates_page;if(t){const{message:n,coupon_edit_url:s}=t;return React.createElement("div",{className:"coupon-template-success-page"},React.createElement("div",{className:"inner"},React.createElement("div",{className:"content-box"},React.createElement("h2",null,n),React.createElement("p",null,r.success_page_desc),React.createElement(mt,{bordered:!0,size:"small",layout:"horizontal",column:1},t.fields.map(c=>React.createElement(mt.Item,{key:c.key,label:c.label},["coupon_code","coupon_url"].includes(c.key)?React.createElement(ku,{value:c.value}):c.value)))),React.createElement("div",{className:"actions-box"},React.createElement(Be,{className:"create-another-btn",text:r.create_another_coupon,type:"primary",size:"large",onClick:()=>a.clearCreatedCouponResponseData()}),React.createElement(P,{href:"".concat(s,"&sendcoupon"),size:"large"},r.send_coupon),React.createElement(P,{href:s,size:"large"},r.edit_coupon))))}return null},Lu=e=>{var t,a;return{formResponse:(a=(t=e.couponTemplates)==null?void 0:t.formResponse)!=null?a:null}},Bu=e=>({actions:$({clearCreatedCouponResponseData:Mu},e)}),Uu=I(Lu,Bu)(xu);const{readCouponTemplate:ju,setEditCouponTemplate:Fu,validateEditCouponTemplateData:Gu,setCreatedCouponResponseData:Hu}=q,Vu=e=>{var E,_;const{template:t,formResponse:a,actions:r}=e,[n,s]=p.useState(!0),{labels:c}=acfwAdminApp.coupon_templates_page,o=new URLSearchParams(oe().search),m=(E=o.get("id"))!=null?E:"0",i=(_=o.get("is_review"))!=null?_:!1,u={rows:2,width:100};return p.useEffect(()=>{t&&(t!=null&&t.fields)||r.readCouponTemplate({id:parseInt(m),isReview:!!i,successCB:g=>{s(!1),r.setEditCouponTemplate({data:g.data})},failCB:()=>s(!1)})},[]),t!=null&&t.fields?a?React.createElement(Uu,null):React.createElement("div",{className:"acfw-coupon-template-form"},React.createElement(H,{gutter:16},React.createElement(N,{span:18},React.createElement("div",{className:"template-form-main"},t?React.createElement(React.Fragment,null,React.createElement("div",{className:"template-heading"},React.createElement("h2",null,t.title),React.createElement("p",null,t.description)),React.createElement("div",{className:"form-instruction"},React.createElement("em",null,c.form_instruction))):React.createElement(z,{active:!0,paragraph:u}),React.createElement("div",{className:"template-fields"},t.fields.map((g,R)=>{var h;return React.createElement(fu,{key:"".concat(g.field,"-").concat((h=g==null?void 0:g.error)!=null?h:""),templateField:g})})))),React.createElement(N,{span:6},React.createElement("div",{className:"template-actions"},React.createElement(Su,{text:c.create_coupon,size:"large"}),React.createElement(Be,{text:c.cancel,onClick:()=>r.setEditCouponTemplate({data:null}),size:"large"}))))):React.createElement("div",{className:"acfw-coupon-template-form"},React.createElement(H,{gutter:16},React.createElement(N,{span:18},React.createElement("div",{className:"template-form-main template-loading"},n?React.createElement(pe,null):React.createElement("p",{className:"template-not-found"},c.template_not_found))),React.createElement(N,{span:6},React.createElement("div",{className:"template-actions"},React.createElement(Be,{text:c.go_back,onClick:()=>r.setEditCouponTemplate({data:null}),size:"large"})))))},Yu=e=>{var t,a,r,n;return{template:(a=(t=e.couponTemplates)==null?void 0:t.edit)!=null?a:null,formResponse:(n=(r=e.couponTemplates)==null?void 0:r.formResponse)!=null?n:null}},qu=e=>({actions:$({readCouponTemplate:ju,setEditCouponTemplate:Fu,validateEditCouponTemplateData:Gu,setCreatedCouponResponseData:Hu},e)}),zu=I(Yu,qu)(Vu);const{togglePremiumModal:Ku}=q,Wu=e=>{var g,R;const{showModal:t,actions:a}=e,{title:r,labels:n,enable_review_tab:s}=acfwAdminApp.coupon_templates_page,c=Q(),o=oe(),m=new URLSearchParams(o.search),i=(g=m.get("id"))!=null?g:null,u=Z(),E=(R=m.get("cttab"))!=null?R:"main",_=h=>{c.push("".concat(u,"admin.php?page=acfw-coupon-templates&cttab=").concat(h))};return React.createElement("div",{className:"coupon-templates-page"},React.createElement(se,{title:r,className:"coupon-templates-header"}),i?React.createElement(zu,null):React.createElement(ce,{defaultActiveKey:E,className:"coupon-templates-tabs",onTabClick:_},React.createElement(ce.TabPane,{tab:n.recently_used_templates,key:"recent"},React.createElement(H,{gutter:16},React.createElement(N,{span:18},React.createElement(ki,null)))),React.createElement(ce.TabPane,{tab:n.available_templates,key:"main"},React.createElement(H,{gutter:16},React.createElement(N,{span:18},React.createElement(Bi,null)),React.createElement(N,{span:6},React.createElement(Wi,null)))),s&&React.createElement(ce.TabPane,{tab:n.review_templates,key:"review"},React.createElement(H,{gutter:16},React.createElement(N,{span:18},React.createElement(Gi,null))))),React.createElement(Ee,{className:"coupon-templates-premium-modal",open:t,centered:!0,onCancel:()=>a.togglePremiumModal({show:!1}),footer:null},React.createElement(nt,{hideUpgrade:!0}),React.createElement("p",null,n.premium_modal_text),React.createElement(P,{type:"primary",href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=coupontemplates",size:"large",target:"_blank"},n.premium_modal_btn)))},Qu=e=>{var t,a;return{showModal:(a=(t=e.couponTemplates)==null?void 0:t.premiumModal)!=null?a:!1}},Ju=e=>({actions:$({togglePremiumModal:Ku},e)}),Xu=I(Qu,Ju)(Wu),Zu=parseInt(acfwpElements.is_lpfw_active),ed=parseInt(acfwpElements.is_agc_active),{setStorePage:td}=ie,{readAdminNotices:ad}=at;acfwpElements.axiosInstance=x;const nd=e=>{const{page:t,actions:a}=e,n=new URLSearchParams(oe().search).get("page");return acfwpElements.appPage=n,p.useEffect(()=>{a.setStorePage({data:n||""})},[n,a]),p.useEffect(()=>{a.readAdminNotices({})},[]),l.createElement("div",{className:"app"},t==="acfw-dashboard"?l.createElement(el,null):null,t==="acfw-store-credits"?l.createElement(Ul,null):null,t==="acfw-coupon-templates"?l.createElement(Xu,null):null,t==="acfw-settings"?l.createElement(ui,null):null,t.includes("acfw-license")?l.createElement(gi,null):null,t==="acfw-premium"?l.createElement(yi,null):null,t==="acfw-help"?l.createElement(Ri,null):null,t==="acfw-about"?l.createElement(hi,null):null,t==="acfw-loyalty-program"&&!Zu?l.createElement(Ti,null):null,t==="acfw-advanced-gift-cards"&&!ed?l.createElement(bi,null):null)},rd=e=>({page:e.page}),sd=e=>({actions:$({setStorePage:td,readAdminNotices:ad},e)}),cd=I(rd,sd)(nd);const{setStorePage:od}=ie,ld=e=>{const{page:t,notices:a,actions:r}=e,[n,s]=p.useState(""),c=Q(),o=Z(),{coupon_nav:{toplevel:m,dashboard:i,links:u},app_pages:E}=acfwAdminApp,_=g=>{c.push("".concat(o,"admin.php?page=").concat(g)),r.setStorePage({data:g})};return p.useEffect(()=>{document.body.classList.add(t),n&&document.body.classList.remove(n),s(t)},[t]),React.createElement(React.Fragment,null,React.createElement("a",{href:"".concat(o,"edit.php?post_type=shop_coupon"),className:"wp-has-submenu wp-has-current-submenu wp-menu-open menu-top toplevel_page_acfw-admin"},React.createElement("div",{className:"wp-menu-arrow"},React.createElement("div",null)),React.createElement("div",{className:"wp-menu-image dashicons-before dashicons-tickets-alt"},React.createElement("br",null)),React.createElement("div",{className:"wp-menu-name"},m,0<a.length&&React.createElement(React.Fragment,null," ",React.createElement("span",{className:"update-plugins count-".concat(a.length)},React.createElement("span",{className:"notices-count"},a.length))))),React.createElement("ul",{className:"wp-submenu wp-submenu-wrap"},React.createElement("li",{className:"wp-submenu-head","aria-hidden":"true"},m),React.createElement("li",{key:"acfw-dashboard",className:"wp-first-item ".concat(t==="acfw-dashboard"?"current":"")},React.createElement("button",{className:"buttonlink dashboard-link",onClick:()=>_("acfw-dashboard")},i)),u.map(({link:g,text:R},h)=>React.createElement("li",{key:h},React.createElement("a",{href:g},R))),E.map(({slug:g,label:R})=>React.createElement("li",{key:g,className:g===t?"current":""},React.createElement("button",{className:"buttonlink ".concat(g,"-link"),onClick:()=>_(g)},R)))))},id=e=>({page:e.page,notices:e.adminNotices}),ud=e=>({actions:$({setStorePage:od},e)}),dd=I(id,ud)(ld),lt=Z(),it=wo(),md={element:l,dom:Ge,router:{BrowserRouter:He,Route:Ve,useLocation:oe,useHistory:Q,Link:kt,Redirect:Ra},redux:{bindActionCreators:$,createStore:Bt,combineReducers:Ut,applyMiddleware:jt,createSagaMiddleware:Lt,connect:I,sagaEffects:{all:xt,put:B,call:U,takeEvery:L}},lodash:window.lodash,antd:Wa,antdIcons:fn,moment:window.moment,pathPrefix:lt,validateURL:ua,appStore:{Provider:Ye,store:it,storeActions:{...ie}}};acfwpElements={...acfwpElements,...md};document.querySelectorAll("#acfw_admin_app").forEach(e=>{Ge.render(l.createElement(Ye,{store:it},l.createElement(He,null,l.createElement(Ve,{path:"".concat(lt,"admin.php"),component:cd}))),e)});document.querySelectorAll("#toplevel_page_acfw-admin").forEach(e=>{Ge.render(l.createElement(Ye,{store:it},l.createElement(He,null,l.createElement(Ve,{path:"".concat(lt,"admin.php"),component:dd}))),e)});export{pd as __vite_legacy_guard};
